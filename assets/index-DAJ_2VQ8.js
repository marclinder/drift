const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-DqvmXg9T.js","assets/webworkerAll-DVYRzpGQ.js","assets/CanvasPool-D3Yt-ebN.js","assets/colorToUniform-K77knUyp.js","assets/WebGPURenderer-tg52dgAt.js","assets/SharedSystems-Ce-7k_9Y.js","assets/WebGLRenderer-4aGvmSRg.js"])))=>i.map(i=>d[i]);
var zs=Object.defineProperty;var Ws=(i,e,t)=>e in i?zs(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var j=(i,e,t)=>Ws(i,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();function js(i){if(!(typeof window>"u")){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=i,document.head.appendChild(e),i}}function De(i,e){var t=i.__state.conversionName.toString(),s=Math.round(i.r),r=Math.round(i.g),n=Math.round(i.b),o=i.a,a=Math.round(i.h),h=i.s.toFixed(1),l=i.v.toFixed(1);if(e||t==="THREE_CHAR_HEX"||t==="SIX_CHAR_HEX"){for(var c=i.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}else{if(t==="CSS_RGB")return"rgb("+s+","+r+","+n+")";if(t==="CSS_RGBA")return"rgba("+s+","+r+","+n+","+o+")";if(t==="HEX")return"0x"+i.hex.toString(16);if(t==="RGB_ARRAY")return"["+s+","+r+","+n+"]";if(t==="RGBA_ARRAY")return"["+s+","+r+","+n+","+o+"]";if(t==="RGB_OBJ")return"{r:"+s+",g:"+r+",b:"+n+"}";if(t==="RGBA_OBJ")return"{r:"+s+",g:"+r+",b:"+n+",a:"+o+"}";if(t==="HSV_OBJ")return"{h:"+a+",s:"+h+",v:"+l+"}";if(t==="HSVA_OBJ")return"{h:"+a+",s:"+h+",v:"+l+",a:"+o+"}"}return"unknown format"}var ci=Array.prototype.forEach,je=Array.prototype.slice,x={BREAK:{},extend:function(e){return this.each(je.call(arguments,1),function(t){var s=this.isObject(t)?Object.keys(t):[];s.forEach((function(r){this.isUndefined(t[r])||(e[r]=t[r])}).bind(this))},this),e},defaults:function(e){return this.each(je.call(arguments,1),function(t){var s=this.isObject(t)?Object.keys(t):[];s.forEach((function(r){this.isUndefined(e[r])&&(e[r]=t[r])}).bind(this))},this),e},compose:function(){var e=je.call(arguments);return function(){for(var t=je.call(arguments),s=e.length-1;s>=0;s--)t=[e[s].apply(this,t)];return t[0]}},each:function(e,t,s){if(e){if(ci&&e.forEach&&e.forEach===ci)e.forEach(t,s);else if(e.length===e.length+0){var r=void 0,n=void 0;for(r=0,n=e.length;r<n;r++)if(r in e&&t.call(s,e[r],r)===this.BREAK)return}else for(var o in e)if(t.call(s,e[o],o)===this.BREAK)return}},defer:function(e){setTimeout(e,0)},debounce:function(e,t,s){var r=void 0;return function(){var n=this,o=arguments;function a(){r=null,s||e.apply(n,o)}var h=s||!r;clearTimeout(r),r=setTimeout(a,t),h&&e.apply(n,o)}},toArray:function(e){return e.toArray?e.toArray():je.call(e)},isUndefined:function(e){return e===void 0},isNull:function(e){return e===null},isNaN:function(i){function e(t){return i.apply(this,arguments)}return e.toString=function(){return i.toString()},e}(function(i){return isNaN(i)}),isArray:Array.isArray||function(i){return i.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return e instanceof Function}},qs=[{litmus:x.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return t===null?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:De},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return t===null?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:De},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return t===null?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:De},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return t===null?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:De}}},{litmus:x.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:x.isArray,conversions:{RGB_ARRAY:{read:function(e){return e.length!==3?!1:{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return e.length!==4?!1:{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:x.isObject,conversions:{RGBA_OBJ:{read:function(e){return x.isNumber(e.r)&&x.isNumber(e.g)&&x.isNumber(e.b)&&x.isNumber(e.a)?{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return x.isNumber(e.r)&&x.isNumber(e.g)&&x.isNumber(e.b)?{space:"RGB",r:e.r,g:e.g,b:e.b}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return x.isNumber(e.h)&&x.isNumber(e.s)&&x.isNumber(e.v)&&x.isNumber(e.a)?{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return x.isNumber(e.h)&&x.isNumber(e.s)&&x.isNumber(e.v)?{space:"HSV",h:e.h,s:e.s,v:e.v}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],qe=void 0,ht=void 0,Dt=function(){ht=!1;var e=arguments.length>1?x.toArray(arguments):arguments[0];return x.each(qs,function(t){if(t.litmus(e))return x.each(t.conversions,function(s,r){if(qe=s.read(e),ht===!1&&qe!==!1)return ht=qe,qe.conversionName=r,qe.conversion=s,x.BREAK}),x.BREAK}),ht},fi=void 0,vt={hsv_to_rgb:function(e,t,s){var r=Math.floor(e/60)%6,n=e/60-Math.floor(e/60),o=s*(1-t),a=s*(1-n*t),h=s*(1-(1-n)*t),l=[[s,h,o],[a,s,o],[o,s,h],[o,a,s],[h,o,s],[s,o,a]][r];return{r:l[0]*255,g:l[1]*255,b:l[2]*255}},rgb_to_hsv:function(e,t,s){var r=Math.min(e,t,s),n=Math.max(e,t,s),o=n-r,a=void 0,h=void 0;if(n!==0)h=o/n;else return{h:NaN,s:0,v:0};return e===n?a=(t-s)/o:t===n?a=2+(s-e)/o:a=4+(e-t)/o,a/=6,a<0&&(a+=1),{h:a*360,s:h,v:n/255}},rgb_to_hex:function(e,t,s){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,s),r},component_from_hex:function(e,t){return e>>t*8&255},hex_with_component:function(e,t,s){return s<<(fi=t*8)|e&~(255<<fi)}},Zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},re=function(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")},ne=function(){function i(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,s){return t&&i(e.prototype,t),s&&i(e,s),e}}(),Ae=function i(e,t,s){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===void 0){var n=Object.getPrototypeOf(e);return n===null?void 0:i(n,t,s)}else{if("value"in r)return r.value;var o=r.get;return o===void 0?void 0:o.call(s)}},Ee=function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(i,e):i.__proto__=e)},Se=function(i,e){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:i},z=function(){function i(){if(re(this,i),this.__state=Dt.apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return ne(i,[{key:"toString",value:function(){return De(this)}},{key:"toHexString",value:function(){return De(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),i}();function ii(i,e,t){Object.defineProperty(i,e,{get:function(){return this.__state.space==="RGB"?this.__state[e]:(z.recalculateRGB(this,e,t),this.__state[e])},set:function(r){this.__state.space!=="RGB"&&(z.recalculateRGB(this,e,t),this.__state.space="RGB"),this.__state[e]=r}})}function si(i,e){Object.defineProperty(i,e,{get:function(){return this.__state.space==="HSV"?this.__state[e]:(z.recalculateHSV(this),this.__state[e])},set:function(s){this.__state.space!=="HSV"&&(z.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=s}})}z.recalculateRGB=function(i,e,t){if(i.__state.space==="HEX")i.__state[e]=vt.component_from_hex(i.__state.hex,t);else if(i.__state.space==="HSV")x.extend(i.__state,vt.hsv_to_rgb(i.__state.h,i.__state.s,i.__state.v));else throw new Error("Corrupted color state")};z.recalculateHSV=function(i){var e=vt.rgb_to_hsv(i.r,i.g,i.b);x.extend(i.__state,{s:e.s,v:e.v}),x.isNaN(e.h)?x.isUndefined(i.__state.h)&&(i.__state.h=0):i.__state.h=e.h};z.COMPONENTS=["r","g","b","h","s","v","hex","a"];ii(z.prototype,"r",2);ii(z.prototype,"g",1);ii(z.prototype,"b",0);si(z.prototype,"h");si(z.prototype,"s");si(z.prototype,"v");Object.defineProperty(z.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}});Object.defineProperty(z.prototype,"hex",{get:function(){return this.__state.space!=="HEX"&&(this.__state.hex=vt.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var Be=function(){function i(e,t){re(this,i),this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0}return ne(i,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),i}(),Ks={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},Qi={};x.each(Ks,function(i,e){x.each(i,function(t){Qi[t]=e})});var Js=/(\d+(\.\d+)?)px/;function ae(i){if(i==="0"||x.isUndefined(i))return 0;var e=i.match(Js);return x.isNull(e)?0:parseFloat(e[1])}var _={makeSelectable:function(e,t){e===void 0||e.style===void 0||(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,s){var r=s,n=t;x.isUndefined(n)&&(n=!0),x.isUndefined(r)&&(r=!0),e.style.position="absolute",n&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,s,r){var n=s||{},o=Qi[t];if(!o)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":{var h=n.x||n.clientX||0,l=n.y||n.clientY||0;a.initMouseEvent(t,n.bubbles||!1,n.cancelable||!0,window,n.clickCount||1,0,0,h,l,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var c=a.initKeyboardEvent||a.initKeyEvent;x.defaults(n,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(t,n.bubbles||!1,n.cancelable,window,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.keyCode,n.charCode);break}default:{a.initEvent(t,n.bubbles||!1,n.cancelable||!0);break}}x.defaults(a,r),e.dispatchEvent(a)},bind:function(e,t,s,r){var n=r||!1;return e.addEventListener?e.addEventListener(t,s,n):e.attachEvent&&e.attachEvent("on"+t,s),_},unbind:function(e,t,s,r){var n=r||!1;return e.removeEventListener?e.removeEventListener(t,s,n):e.detachEvent&&e.detachEvent("on"+t,s),_},addClass:function(e,t){if(e.className===void 0)e.className=t;else if(e.className!==t){var s=e.className.split(/ +/);s.indexOf(t)===-1&&(s.push(t),e.className=s.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return _},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var s=e.className.split(/ +/),r=s.indexOf(t);r!==-1&&(s.splice(r,1),e.className=s.join(" "))}else e.className=void 0;return _},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return ae(t["border-left-width"])+ae(t["border-right-width"])+ae(t["padding-left"])+ae(t["padding-right"])+ae(t.width)},getHeight:function(e){var t=getComputedStyle(e);return ae(t["border-top-width"])+ae(t["border-bottom-width"])+ae(t["padding-top"])+ae(t["padding-bottom"])+ae(t.height)},getOffset:function(e){var t=e,s={left:0,top:0};if(t.offsetParent)do s.left+=t.offsetLeft,s.top+=t.offsetTop,t=t.offsetParent;while(t);return s},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},es=function(i){Ee(e,i);function e(t,s){re(this,e);var r=Se(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,s)),n=r;r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox");function o(){n.setValue(!n.__prev)}return _.bind(r.__checkbox,"change",o,!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return ne(e,[{key:"setValue",value:function(s){var r=Ae(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,s);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),r}},{key:"updateDisplay",value:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Ae(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Be),Qs=function(i){Ee(e,i);function e(t,s,r){re(this,e);var n=Se(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,s)),o=r,a=n;if(n.__select=document.createElement("select"),x.isArray(o)){var h={};x.each(o,function(l){h[l]=l}),o=h}return x.each(o,function(l,c){var f=document.createElement("option");f.innerHTML=c,f.setAttribute("value",l),a.__select.appendChild(f)}),n.updateDisplay(),_.bind(n.__select,"change",function(){var l=this.options[this.selectedIndex].value;a.setValue(l)}),n.domElement.appendChild(n.__select),n}return ne(e,[{key:"setValue",value:function(s){var r=Ae(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,s);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),r}},{key:"updateDisplay",value:function(){return _.isActive(this.__select)?this:(this.__select.value=this.getValue(),Ae(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(Be),er=function(i){Ee(e,i);function e(t,s){re(this,e);var r=Se(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,s)),n=r;function o(){n.setValue(n.__input.value)}function a(){n.__onFinishChange&&n.__onFinishChange.call(n,n.getValue())}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),_.bind(r.__input,"keyup",o),_.bind(r.__input,"change",o),_.bind(r.__input,"blur",a),_.bind(r.__input,"keydown",function(h){h.keyCode===13&&this.blur()}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return ne(e,[{key:"updateDisplay",value:function(){return _.isActive(this.__input)||(this.__input.value=this.getValue()),Ae(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Be);function pi(i){var e=i.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var ts=function(i){Ee(e,i);function e(t,s,r){re(this,e);var n=Se(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,s)),o=r||{};return n.__min=o.min,n.__max=o.max,n.__step=o.step,x.isUndefined(n.__step)?n.initialValue===0?n.__impliedStep=1:n.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(n.initialValue))/Math.LN10))/10:n.__impliedStep=n.__step,n.__precision=pi(n.__impliedStep),n}return ne(e,[{key:"setValue",value:function(s){var r=s;return this.__min!==void 0&&r<this.__min?r=this.__min:this.__max!==void 0&&r>this.__max&&(r=this.__max),this.__step!==void 0&&r%this.__step!==0&&(r=Math.round(r/this.__step)*this.__step),Ae(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,r)}},{key:"min",value:function(s){return this.__min=s,this}},{key:"max",value:function(s){return this.__max=s,this}},{key:"step",value:function(s){return this.__step=s,this.__impliedStep=s,this.__precision=pi(s),this}}]),e}(Be);function tr(i,e){var t=Math.pow(10,e);return Math.round(i*t)/t}var wt=function(i){Ee(e,i);function e(t,s,r){re(this,e);var n=Se(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,s,r));n.__truncationSuspended=!1;var o=n,a=void 0;function h(){var A=parseFloat(o.__input.value);x.isNaN(A)||o.setValue(A)}function l(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function c(){l()}function f(A){var E=a-A.clientY;o.setValue(o.getValue()+E*o.__impliedStep),a=A.clientY}function m(){_.unbind(window,"mousemove",f),_.unbind(window,"mouseup",m),l()}function g(A){_.bind(window,"mousemove",f),_.bind(window,"mouseup",m),a=A.clientY}return n.__input=document.createElement("input"),n.__input.setAttribute("type","text"),_.bind(n.__input,"change",h),_.bind(n.__input,"blur",c),_.bind(n.__input,"mousedown",g),_.bind(n.__input,"keydown",function(A){A.keyCode===13&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,l())}),n.updateDisplay(),n.domElement.appendChild(n.__input),n}return ne(e,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():tr(this.getValue(),this.__precision),Ae(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(ts);function _i(i,e,t,s,r){return s+(r-s)*((i-e)/(t-e))}var Ut=function(i){Ee(e,i);function e(t,s,r,n,o){re(this,e);var a=Se(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,s,{min:r,max:n,step:o})),h=a;a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),_.bind(a.__background,"mousedown",l),_.bind(a.__background,"touchstart",m),_.addClass(a.__background,"slider"),_.addClass(a.__foreground,"slider-fg");function l(E){document.activeElement.blur(),_.bind(window,"mousemove",c),_.bind(window,"mouseup",f),c(E)}function c(E){E.preventDefault();var v=h.__background.getBoundingClientRect();return h.setValue(_i(E.clientX,v.left,v.right,h.__min,h.__max)),!1}function f(){_.unbind(window,"mousemove",c),_.unbind(window,"mouseup",f),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}function m(E){E.touches.length===1&&(_.bind(window,"touchmove",g),_.bind(window,"touchend",A),g(E))}function g(E){var v=E.touches[0].clientX,M=h.__background.getBoundingClientRect();h.setValue(_i(v,M.left,M.right,h.__min,h.__max))}function A(){_.unbind(window,"touchmove",g),_.unbind(window,"touchend",A),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}return a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return ne(e,[{key:"updateDisplay",value:function(){var s=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=s*100+"%",Ae(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(ts),is=function(i){Ee(e,i);function e(t,s,r){re(this,e);var n=Se(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,s)),o=n;return n.__button=document.createElement("div"),n.__button.innerHTML=r===void 0?"Fire":r,_.bind(n.__button,"click",function(a){return a.preventDefault(),o.fire(),!1}),_.addClass(n.__button,"button"),n.domElement.appendChild(n.__button),n}return ne(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(Be),Xt=function(i){Ee(e,i);function e(t,s){re(this,e);var r=Se(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,s));r.__color=new z(r.getValue()),r.__temp=new z(0);var n=r;r.domElement=document.createElement("div"),_.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",_.bind(r.__input,"keydown",function(E){E.keyCode===13&&f.call(this)}),_.bind(r.__input,"blur",f),_.bind(r.__selector,"mousedown",function(){_.addClass(this,"drag").bind(window,"mouseup",function(){_.removeClass(n.__selector,"drag")})}),_.bind(r.__selector,"touchstart",function(){_.addClass(this,"drag").bind(window,"touchend",function(){_.removeClass(n.__selector,"drag")})});var o=document.createElement("div");x.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),x.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),x.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),x.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),x.extend(o.style,{width:"100%",height:"100%",background:"none"}),mi(o,"top","rgba(0,0,0,0)","#000"),x.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),sr(r.__hue_field),x.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),_.bind(r.__saturation_field,"mousedown",a),_.bind(r.__saturation_field,"touchstart",a),_.bind(r.__field_knob,"mousedown",a),_.bind(r.__field_knob,"touchstart",a),_.bind(r.__hue_field,"mousedown",h),_.bind(r.__hue_field,"touchstart",h);function a(E){g(E),_.bind(window,"mousemove",g),_.bind(window,"touchmove",g),_.bind(window,"mouseup",l),_.bind(window,"touchend",l)}function h(E){A(E),_.bind(window,"mousemove",A),_.bind(window,"touchmove",A),_.bind(window,"mouseup",c),_.bind(window,"touchend",c)}function l(){_.unbind(window,"mousemove",g),_.unbind(window,"touchmove",g),_.unbind(window,"mouseup",l),_.unbind(window,"touchend",l),m()}function c(){_.unbind(window,"mousemove",A),_.unbind(window,"touchmove",A),_.unbind(window,"mouseup",c),_.unbind(window,"touchend",c),m()}function f(){var E=Dt(this.value);E!==!1?(n.__color.__state=E,n.setValue(n.__color.toOriginal())):this.value=n.__color.toString()}function m(){n.__onFinishChange&&n.__onFinishChange.call(n,n.__color.toOriginal())}r.__saturation_field.appendChild(o),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay();function g(E){E.type.indexOf("touch")===-1&&E.preventDefault();var v=n.__saturation_field.getBoundingClientRect(),M=E.touches&&E.touches[0]||E,P=M.clientX,S=M.clientY,N=(P-v.left)/(v.right-v.left),H=1-(S-v.top)/(v.bottom-v.top);return H>1?H=1:H<0&&(H=0),N>1?N=1:N<0&&(N=0),n.__color.v=H,n.__color.s=N,n.setValue(n.__color.toOriginal()),!1}function A(E){E.type.indexOf("touch")===-1&&E.preventDefault();var v=n.__hue_field.getBoundingClientRect(),M=E.touches&&E.touches[0]||E,P=M.clientY,S=1-(P-v.top)/(v.bottom-v.top);return S>1?S=1:S<0&&(S=0),n.__color.h=S*360,n.setValue(n.__color.toOriginal()),!1}return r}return ne(e,[{key:"updateDisplay",value:function(){var s=Dt(this.getValue());if(s!==!1){var r=!1;x.each(z.COMPONENTS,function(a){if(!x.isUndefined(s[a])&&!x.isUndefined(this.__color.__state[a])&&s[a]!==this.__color.__state[a])return r=!0,{}},this),r&&x.extend(this.__color.__state,s)}x.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,o=255-n;x.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,mi(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),x.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+o+","+o+","+o+",.7)"})}}]),e}(Be),ir=["-moz-","-o-","-webkit-","-ms-",""];function mi(i,e,t,s){i.style.background="",x.each(ir,function(r){i.style.cssText+="background: "+r+"linear-gradient("+e+", "+t+" 0%, "+s+" 100%); "})}function sr(i){i.style.background="",i.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",i.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var rr={load:function(e,t){var s=t||document,r=s.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,s.getElementsByTagName("head")[0].appendChild(r)},inject:function(e,t){var s=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var n=s.getElementsByTagName("head")[0];try{n.appendChild(r)}catch{}}},nr=`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.

    </div>

  </div>

</div>`,or=function(e,t){var s=e[t];return x.isArray(arguments[2])||x.isObject(arguments[2])?new Qs(e,t,arguments[2]):x.isNumber(s)?x.isNumber(arguments[2])&&x.isNumber(arguments[3])?x.isNumber(arguments[4])?new Ut(e,t,arguments[2],arguments[3],arguments[4]):new Ut(e,t,arguments[2],arguments[3]):x.isNumber(arguments[4])?new wt(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new wt(e,t,{min:arguments[2],max:arguments[3]}):x.isString(s)?new er(e,t):x.isFunction(s)?new is(e,t,""):x.isBoolean(s)?new es(e,t):null};function ar(i){setTimeout(i,1e3/60)}var hr=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||ar,lr=function(){function i(){re(this,i),this.backgroundElement=document.createElement("div"),x.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),_.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),x.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;_.bind(this.backgroundElement,"click",function(){e.hide()})}return ne(i,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),x.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var t=this,s=function r(){t.domElement.style.display="none",t.backgroundElement.style.display="none",_.unbind(t.domElement,"webkitTransitionEnd",r),_.unbind(t.domElement,"transitionend",r),_.unbind(t.domElement,"oTransitionEnd",r)};_.bind(this.domElement,"webkitTransitionEnd",s),_.bind(this.domElement,"transitionend",s),_.bind(this.domElement,"oTransitionEnd",s),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-_.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-_.getHeight(this.domElement)/2+"px"}}]),i}(),dr=js(`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`);rr.inject(dr);var gi="dg",yi=72,xi=20,nt="Default",Qe=function(){try{return!!window.localStorage}catch{return!1}}(),it=void 0,bi=!0,Le=void 0,St=!1,ss=[],G=function i(e){var t=this,s=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),_.addClass(this.domElement,gi),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],s=x.defaults(s,{closeOnTop:!1,autoPlace:!0,width:i.DEFAULT_WIDTH}),s=x.defaults(s,{resizable:s.autoPlace,hideable:s.autoPlace}),x.isUndefined(s.load)?s.load={preset:nt}:s.preset&&(s.load.preset=s.preset),x.isUndefined(s.parent)&&s.hideable&&ss.push(this),s.resizable=x.isUndefined(s.parent)&&s.resizable,s.autoPlace&&x.isUndefined(s.scrollable)&&(s.scrollable=!0);var r=Qe&&localStorage.getItem(Ge(this,"isLocal"))==="true",n=void 0,o=void 0;if(Object.defineProperties(this,{parent:{get:function(){return s.parent}},scrollable:{get:function(){return s.scrollable}},autoPlace:{get:function(){return s.autoPlace}},closeOnTop:{get:function(){return s.closeOnTop}},preset:{get:function(){return t.parent?t.getRoot().preset:s.load.preset},set:function(m){t.parent?t.getRoot().preset=m:s.load.preset=m,pr(this),t.revert()}},width:{get:function(){return s.width},set:function(m){s.width=m,$t(t,m)}},name:{get:function(){return s.name},set:function(m){s.name=m,o&&(o.innerHTML=s.name)}},closed:{get:function(){return s.closed},set:function(m){s.closed=m,s.closed?_.addClass(t.__ul,i.CLASS_CLOSED):_.removeClass(t.__ul,i.CLASS_CLOSED),this.onResize(),t.__closeButton&&(t.__closeButton.innerHTML=m?i.TEXT_OPEN:i.TEXT_CLOSED)}},load:{get:function(){return s.load}},useLocalStorage:{get:function(){return r},set:function(m){Qe&&(r=m,m?_.bind(window,"unload",n):_.unbind(window,"unload",n),localStorage.setItem(Ge(t,"isLocal"),m))}}}),x.isUndefined(s.parent)){if(this.closed=s.closed||!1,_.addClass(this.domElement,i.CLASS_MAIN),_.makeSelectable(this.domElement,!1),Qe&&r){t.useLocalStorage=!0;var a=localStorage.getItem(Ge(this,"gui"));a&&(s.load=JSON.parse(a))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=i.TEXT_CLOSED,_.addClass(this.__closeButton,i.CLASS_CLOSE_BUTTON),s.closeOnTop?(_.addClass(this.__closeButton,i.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(_.addClass(this.__closeButton,i.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),_.bind(this.__closeButton,"click",function(){t.closed=!t.closed})}else{s.closed===void 0&&(s.closed=!0);var h=document.createTextNode(s.name);_.addClass(h,"controller-name"),o=ri(t,h);var l=function(m){return m.preventDefault(),t.closed=!t.closed,!1};_.addClass(this.__ul,i.CLASS_CLOSED),_.addClass(o,"title"),_.bind(o,"click",l),s.closed||(this.closed=!1)}s.autoPlace&&(x.isUndefined(s.parent)&&(bi&&(Le=document.createElement("div"),_.addClass(Le,gi),_.addClass(Le,i.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Le),bi=!1),Le.appendChild(this.domElement),_.addClass(this.domElement,i.CLASS_AUTO_PLACE)),this.parent||$t(t,s.width)),this.__resizeHandler=function(){t.onResizeDebounced()},_.bind(window,"resize",this.__resizeHandler),_.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),_.bind(this.__ul,"transitionend",this.__resizeHandler),_.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),s.resizable&&fr(this),n=function(){Qe&&localStorage.getItem(Ge(t,"isLocal"))==="true"&&localStorage.setItem(Ge(t,"gui"),JSON.stringify(t.getSaveObject()))},this.saveToLocalStorageIfPossible=n;function c(){var f=t.getRoot();f.width+=1,x.defer(function(){f.width-=1})}s.parent||c()};G.toggleHide=function(){St=!St,x.each(ss,function(i){i.domElement.style.display=St?"none":""})};G.CLASS_AUTO_PLACE="a";G.CLASS_AUTO_PLACE_CONTAINER="ac";G.CLASS_MAIN="main";G.CLASS_CONTROLLER_ROW="cr";G.CLASS_TOO_TALL="taller-than-window";G.CLASS_CLOSED="closed";G.CLASS_CLOSE_BUTTON="close-button";G.CLASS_CLOSE_TOP="close-top";G.CLASS_CLOSE_BOTTOM="close-bottom";G.CLASS_DRAG="drag";G.DEFAULT_WIDTH=245;G.TEXT_CLOSED="Close Controls";G.TEXT_OPEN="Open Controls";G._keydownHandler=function(i){document.activeElement.type!=="text"&&(i.which===yi||i.keyCode===yi)&&G.toggleHide()};_.bind(window,"keydown",G._keydownHandler,!1);x.extend(G.prototype,{add:function(e,t){return st(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return st(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;x.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&Le.removeChild(this.domElement);var e=this;x.each(this.__folders,function(t){e.removeFolder(t)}),_.unbind(window,"keydown",G._keydownHandler,!1),vi(this)},addFolder:function(e){if(this.__folders[e]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var s=new G(t);this.__folders[e]=s;var r=ri(this,s.domElement);return _.addClass(r,"folder"),s},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],vi(e);var t=this;x.each(e.__folders,function(s){e.removeFolder(s)}),x.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=_.getOffset(e.__ul).top,s=0;x.each(e.__ul.childNodes,function(r){e.autoPlace&&r===e.__save_row||(s+=_.getHeight(r))}),window.innerHeight-t-xi<s?(_.addClass(e.domElement,G.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-xi+"px"):(_.removeClass(e.domElement,G.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&x.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:x.debounce(function(){this.onResize()},50),remember:function(){if(x.isUndefined(it)&&(it=new lr,it.domElement.innerHTML=nr),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;x.each(Array.prototype.slice.call(arguments),function(t){e.__rememberedObjects.length===0&&cr(e),e.__rememberedObjects.indexOf(t)===-1&&e.__rememberedObjects.push(t)}),this.autoPlace&&$t(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=lt(this)),e.folders={},x.each(this.__folders,function(t,s){e.folders[s]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=lt(this),Yt(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[nt]=lt(this,!0)),this.load.remembered[e]=lt(this),this.preset=e,Vt(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){x.each(this.__controllers,function(t){this.getRoot().load.remembered?rs(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),x.each(this.__folders,function(t){t.revert(t)}),e||Yt(this.getRoot(),!1)},listen:function(e){var t=this.__listening.length===0;this.__listening.push(e),t&&ns(this.__listening)},updateDisplay:function(){x.each(this.__controllers,function(e){e.updateDisplay()}),x.each(this.__folders,function(e){e.updateDisplay()})}});function ri(i,e,t){var s=document.createElement("li");return e&&s.appendChild(e),t?i.__ul.insertBefore(s,t):i.__ul.appendChild(s),i.onResize(),s}function vi(i){_.unbind(window,"resize",i.__resizeHandler),i.saveToLocalStorageIfPossible&&_.unbind(window,"unload",i.saveToLocalStorageIfPossible)}function Yt(i,e){var t=i.__preset_select[i.__preset_select.selectedIndex];e?t.innerHTML=t.value+"*":t.innerHTML=t.value}function ur(i,e,t){if(t.__li=e,t.__gui=i,x.extend(t,{options:function(o){if(arguments.length>1){var a=t.__li.nextElementSibling;return t.remove(),st(i,t.object,t.property,{before:a,factoryArgs:[x.toArray(arguments)]})}if(x.isArray(o)||x.isObject(o)){var h=t.__li.nextElementSibling;return t.remove(),st(i,t.object,t.property,{before:h,factoryArgs:[o]})}},name:function(o){return t.__li.firstElementChild.firstElementChild.innerHTML=o,t},listen:function(){return t.__gui.listen(t),t},remove:function(){return t.__gui.remove(t),t}}),t instanceof Ut){var s=new wt(t.object,t.property,{min:t.__min,max:t.__max,step:t.__step});x.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(n){var o=t[n],a=s[n];t[n]=s[n]=function(){var h=Array.prototype.slice.call(arguments);return a.apply(s,h),o.apply(t,h)}}),_.addClass(e,"has-slider"),t.domElement.insertBefore(s.domElement,t.domElement.firstElementChild)}else if(t instanceof wt){var r=function(o){if(x.isNumber(t.__min)&&x.isNumber(t.__max)){var a=t.__li.firstElementChild.firstElementChild.innerHTML,h=t.__gui.__listening.indexOf(t)>-1;t.remove();var l=st(i,t.object,t.property,{before:t.__li.nextElementSibling,factoryArgs:[t.__min,t.__max,t.__step]});return l.name(a),h&&l.listen(),l}return o};t.min=x.compose(r,t.min),t.max=x.compose(r,t.max)}else t instanceof es?(_.bind(e,"click",function(){_.fakeEvent(t.__checkbox,"click")}),_.bind(t.__checkbox,"click",function(n){n.stopPropagation()})):t instanceof is?(_.bind(e,"click",function(){_.fakeEvent(t.__button,"click")}),_.bind(e,"mouseover",function(){_.addClass(t.__button,"hover")}),_.bind(e,"mouseout",function(){_.removeClass(t.__button,"hover")})):t instanceof Xt&&(_.addClass(e,"color"),t.updateDisplay=x.compose(function(n){return e.style.borderLeftColor=t.__color.toString(),n},t.updateDisplay),t.updateDisplay());t.setValue=x.compose(function(n){return i.getRoot().__preset_select&&t.isModified()&&Yt(i.getRoot(),!0),n},t.setValue)}function rs(i,e){var t=i.getRoot(),s=t.__rememberedObjects.indexOf(e.object);if(s!==-1){var r=t.__rememberedObjectIndecesToControllers[s];if(r===void 0&&(r={},t.__rememberedObjectIndecesToControllers[s]=r),r[e.property]=e,t.load&&t.load.remembered){var n=t.load.remembered,o=void 0;if(n[i.preset])o=n[i.preset];else if(n[nt])o=n[nt];else return;if(o[s]&&o[s][e.property]!==void 0){var a=o[s][e.property];e.initialValue=a,e.setValue(a)}}}}function st(i,e,t,s){if(e[t]===void 0)throw new Error('Object "'+e+'" has no property "'+t+'"');var r=void 0;if(s.color)r=new Xt(e,t);else{var n=[e,t].concat(s.factoryArgs);r=or.apply(i,n)}s.before instanceof Be&&(s.before=s.before.__li),rs(i,r),_.addClass(r.domElement,"c");var o=document.createElement("span");_.addClass(o,"property-name"),o.innerHTML=r.property;var a=document.createElement("div");a.appendChild(o),a.appendChild(r.domElement);var h=ri(i,a,s.before);return _.addClass(h,G.CLASS_CONTROLLER_ROW),r instanceof Xt?_.addClass(h,"color"):_.addClass(h,Zs(r.getValue())),ur(i,h,r),i.__controllers.push(r),r}function Ge(i,e){return document.location.href+"."+e}function Vt(i,e,t){var s=document.createElement("option");s.innerHTML=e,s.value=e,i.__preset_select.appendChild(s),t&&(i.__preset_select.selectedIndex=i.__preset_select.length-1)}function wi(i,e){e.style.display=i.useLocalStorage?"block":"none"}function cr(i){var e=i.__save_row=document.createElement("li");_.addClass(i.domElement,"has-save"),i.__ul.insertBefore(e,i.__ul.firstChild),_.addClass(e,"save-row");var t=document.createElement("span");t.innerHTML="&nbsp;",_.addClass(t,"button gears");var s=document.createElement("span");s.innerHTML="Save",_.addClass(s,"button"),_.addClass(s,"save");var r=document.createElement("span");r.innerHTML="New",_.addClass(r,"button"),_.addClass(r,"save-as");var n=document.createElement("span");n.innerHTML="Revert",_.addClass(n,"button"),_.addClass(n,"revert");var o=i.__preset_select=document.createElement("select");if(i.load&&i.load.remembered?x.each(i.load.remembered,function(f,m){Vt(i,m,m===i.preset)}):Vt(i,nt,!1),_.bind(o,"change",function(){for(var f=0;f<i.__preset_select.length;f++)i.__preset_select[f].innerHTML=i.__preset_select[f].value;i.preset=this.value}),e.appendChild(o),e.appendChild(t),e.appendChild(s),e.appendChild(r),e.appendChild(n),Qe){var a=document.getElementById("dg-local-explain"),h=document.getElementById("dg-local-storage"),l=document.getElementById("dg-save-locally");l.style.display="block",localStorage.getItem(Ge(i,"isLocal"))==="true"&&h.setAttribute("checked","checked"),wi(i,a),_.bind(h,"change",function(){i.useLocalStorage=!i.useLocalStorage,wi(i,a)})}var c=document.getElementById("dg-new-constructor");_.bind(c,"keydown",function(f){f.metaKey&&(f.which===67||f.keyCode===67)&&it.hide()}),_.bind(t,"click",function(){c.innerHTML=JSON.stringify(i.getSaveObject(),void 0,2),it.show(),c.focus(),c.select()}),_.bind(s,"click",function(){i.save()}),_.bind(r,"click",function(){var f=prompt("Enter a new preset name.");f&&i.saveAs(f)}),_.bind(n,"click",function(){i.revert()})}function fr(i){var e=void 0;i.__resize_handle=document.createElement("div"),x.extend(i.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});function t(n){return n.preventDefault(),i.width+=e-n.clientX,i.onResize(),e=n.clientX,!1}function s(){_.removeClass(i.__closeButton,G.CLASS_DRAG),_.unbind(window,"mousemove",t),_.unbind(window,"mouseup",s)}function r(n){return n.preventDefault(),e=n.clientX,_.addClass(i.__closeButton,G.CLASS_DRAG),_.bind(window,"mousemove",t),_.bind(window,"mouseup",s),!1}_.bind(i.__resize_handle,"mousedown",r),_.bind(i.__closeButton,"mousedown",r),i.domElement.insertBefore(i.__resize_handle,i.domElement.firstElementChild)}function $t(i,e){i.domElement.style.width=e+"px",i.__save_row&&i.autoPlace&&(i.__save_row.style.width=e+"px"),i.__closeButton&&(i.__closeButton.style.width=e+"px")}function lt(i,e){var t={};return x.each(i.__rememberedObjects,function(s,r){var n={},o=i.__rememberedObjectIndecesToControllers[r];x.each(o,function(a,h){n[h]=e?a.initialValue:a.getValue()}),t[r]=n}),t}function pr(i){for(var e=0;e<i.__preset_select.length;e++)i.__preset_select[e].value===i.preset&&(i.__preset_select.selectedIndex=e)}function ns(i){i.length!==0&&hr.call(window,function(){ns(i)}),x.each(i,function(e){e.updateDisplay()})}var _r=G;function ni(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var yt={exports:{}},mr=yt.exports,Ai;function gr(){return Ai||(Ai=1,function(i,e){(function(t,s){i.exports=s()})(mr,function(){var t=function(){function s(g){return o.appendChild(g.dom),g}function r(g){for(var A=0;A<o.children.length;A++)o.children[A].style.display=A===g?"block":"none";n=g}var n=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(g){g.preventDefault(),r(++n%o.children.length)},!1);var a=(performance||Date).now(),h=a,l=0,c=s(new t.Panel("FPS","#0ff","#002")),f=s(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var m=s(new t.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:o,addPanel:s,showPanel:r,begin:function(){a=(performance||Date).now()},end:function(){l++;var g=(performance||Date).now();if(f.update(g-a,200),g>h+1e3&&(c.update(1e3*l/(g-h),100),h=g,l=0,m)){var A=performance.memory;m.update(A.usedJSHeapSize/1048576,A.jsHeapSizeLimit/1048576)}return g},update:function(){a=this.end()},domElement:o,setMode:r}};return t.Panel=function(s,r,n){var o=1/0,a=0,h=Math.round,l=h(window.devicePixelRatio||1),c=80*l,f=48*l,m=3*l,g=2*l,A=3*l,E=15*l,v=74*l,M=30*l,P=document.createElement("canvas");P.width=c,P.height=f,P.style.cssText="width:80px;height:48px";var S=P.getContext("2d");return S.font="bold "+9*l+"px Helvetica,Arial,sans-serif",S.textBaseline="top",S.fillStyle=n,S.fillRect(0,0,c,f),S.fillStyle=r,S.fillText(s,m,g),S.fillRect(A,E,v,M),S.fillStyle=n,S.globalAlpha=.9,S.fillRect(A,E,v,M),{dom:P,update:function(N,H){o=Math.min(o,N),a=Math.max(a,N),S.fillStyle=n,S.globalAlpha=1,S.fillRect(0,0,c,E),S.fillStyle=r,S.fillText(h(N)+" "+s+" ("+h(o)+"-"+h(a)+")",m,g),S.drawImage(P,A+l,E,v-l,M,A,E,v-l,M),S.fillRect(A+v-l,E,l,M),S.fillStyle=n,S.globalAlpha=.9,S.fillRect(A+v-l,E,l,h((1-N/H)*M))}}},t})}(yt)),yt.exports}var yr=gr();const xr=ni(yr),br="modulepreload",vr=function(i){return"/"+i},Ci={},At=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){let o=function(l){return Promise.all(l.map(c=>Promise.resolve(c).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),h=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=o(t.map(l=>{if(l=vr(l),l in Ci)return;Ci[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const m=document.createElement("link");if(m.rel=c?"stylesheet":br,c||(m.as="script"),m.crossOrigin="",m.href=l,h&&m.setAttribute("nonce",h),document.head.appendChild(m),c)return new Promise((g,A)=>{m.addEventListener("load",g),m.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&n(a.reason);return e().catch(n)})};var V=(i=>(i.Application="application",i.WebGLPipes="webgl-pipes",i.WebGLPipesAdaptor="webgl-pipes-adaptor",i.WebGLSystem="webgl-system",i.WebGPUPipes="webgpu-pipes",i.WebGPUPipesAdaptor="webgpu-pipes-adaptor",i.WebGPUSystem="webgpu-system",i.CanvasSystem="canvas-system",i.CanvasPipesAdaptor="canvas-pipes-adaptor",i.CanvasPipes="canvas-pipes",i.Asset="asset",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser",i.MaskEffect="mask-effect",i.BlendMode="blend-mode",i.TextureSource="texture-source",i.Environment="environment",i.ShapeBuilder="shape-builder",i.Batcher="batcher",i))(V||{});const zt=i=>{if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");i={...typeof i.extension!="object"?{type:i.extension}:i.extension,ref:i}}if(typeof i=="object")i={...i};else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},dt=(i,e)=>zt(i).priority??e,ue={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...i){return i.map(zt).forEach(e=>{e.type.forEach(t=>{var s,r;return(r=(s=this._removeHandlers)[t])==null?void 0:r.call(s,e)})}),this},add(...i){return i.map(zt).forEach(e=>{e.type.forEach(t=>{var n,o;const s=this._addHandlers,r=this._queue;s[t]?(o=s[t])==null||o.call(s,e):(r[t]=r[t]||[],(n=r[t])==null||n.push(e))})}),this},handle(i,e,t){var o;const s=this._addHandlers,r=this._removeHandlers;if(s[i]||r[i])throw new Error(`Extension type ${i} already has a handler`);s[i]=e,r[i]=t;const n=this._queue;return n[i]&&((o=n[i])==null||o.forEach(a=>e(a)),delete n[i]),this},handleByMap(i,e){return this.handle(i,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(i,e,t=-1){return this.handle(i,s=>{e.findIndex(n=>n.name===s.name)>=0||(e.push({name:s.name,value:s.ref}),e.sort((n,o)=>dt(o.value,t)-dt(n.value,t)))},s=>{const r=e.findIndex(n=>n.name===s.name);r!==-1&&e.splice(r,1)})},handleByList(i,e,t=-1){return this.handle(i,s=>{e.includes(s.ref)||(e.push(s.ref),e.sort((r,n)=>dt(n,t)-dt(r,t)))},s=>{const r=e.indexOf(s.ref);r!==-1&&e.splice(r,1)})},mixin(i,...e){for(const t of e)Object.defineProperties(i.prototype,Object.getOwnPropertyDescriptors(t))}},wr={extension:{type:V.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await At(()=>import("./browserAll-DqvmXg9T.js"),__vite__mapDeps([0,1,2,3]))}},Ar={extension:{type:V.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await At(()=>import("./webworkerAll-DVYRzpGQ.js"),__vite__mapDeps([1,2,3]))}};class J{constructor(e,t,s){this._x=t||0,this._y=s||0,this._observer=e}clone(e){return new J(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var Tt={exports:{}},Ei;function Cr(){return Ei||(Ei=1,function(i){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function r(h,l,c){this.fn=h,this.context=l,this.once=c||!1}function n(h,l,c,f,m){if(typeof c!="function")throw new TypeError("The listener must be a function");var g=new r(c,f||h,m),A=t?t+l:l;return h._events[A]?h._events[A].fn?h._events[A]=[h._events[A],g]:h._events[A].push(g):(h._events[A]=g,h._eventsCount++),h}function o(h,l){--h._eventsCount===0?h._events=new s:delete h._events[l]}function a(){this._events=new s,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],c,f;if(this._eventsCount===0)return l;for(f in c=this._events)e.call(c,f)&&l.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},a.prototype.listeners=function(l){var c=t?t+l:l,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,g=f.length,A=new Array(g);m<g;m++)A[m]=f[m].fn;return A},a.prototype.listenerCount=function(l){var c=t?t+l:l,f=this._events[c];return f?f.fn?1:f.length:0},a.prototype.emit=function(l,c,f,m,g,A){var E=t?t+l:l;if(!this._events[E])return!1;var v=this._events[E],M=arguments.length,P,S;if(v.fn){switch(v.once&&this.removeListener(l,v.fn,void 0,!0),M){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,f),!0;case 4:return v.fn.call(v.context,c,f,m),!0;case 5:return v.fn.call(v.context,c,f,m,g),!0;case 6:return v.fn.call(v.context,c,f,m,g,A),!0}for(S=1,P=new Array(M-1);S<M;S++)P[S-1]=arguments[S];v.fn.apply(v.context,P)}else{var N=v.length,H;for(S=0;S<N;S++)switch(v[S].once&&this.removeListener(l,v[S].fn,void 0,!0),M){case 1:v[S].fn.call(v[S].context);break;case 2:v[S].fn.call(v[S].context,c);break;case 3:v[S].fn.call(v[S].context,c,f);break;case 4:v[S].fn.call(v[S].context,c,f,m);break;default:if(!P)for(H=1,P=new Array(M-1);H<M;H++)P[H-1]=arguments[H];v[S].fn.apply(v[S].context,P)}}return!0},a.prototype.on=function(l,c,f){return n(this,l,c,f,!1)},a.prototype.once=function(l,c,f){return n(this,l,c,f,!0)},a.prototype.removeListener=function(l,c,f,m){var g=t?t+l:l;if(!this._events[g])return this;if(!c)return o(this,g),this;var A=this._events[g];if(A.fn)A.fn===c&&(!m||A.once)&&(!f||A.context===f)&&o(this,g);else{for(var E=0,v=[],M=A.length;E<M;E++)(A[E].fn!==c||m&&!A[E].once||f&&A[E].context!==f)&&v.push(A[E]);v.length?this._events[g]=v.length===1?v[0]:v:o(this,g)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=t?t+l:l,this._events[c]&&o(this,c)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,i.exports=a}(Tt)),Tt.exports}var Er=Cr();const at=ni(Er),Sr=Math.PI*2,Tr=180/Math.PI,Mr=Math.PI/180;class le{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new le(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Mt.x=0,Mt.y=0,Mt}}const Mt=new le;class X{constructor(e=1,t=0,s=0,r=1,n=0,o=0){this.array=null,this.a=e,this.b=t,this.c=s,this.d=r,this.tx=n,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,s,r,n,o){return this.a=e,this.b=t,this.c=s,this.d=r,this.tx=n,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const s=t||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(e,t){t=t||new le;const s=e.x,r=e.y;return t.x=this.a*s+this.c*r+this.tx,t.y=this.b*s+this.d*r+this.ty,t}applyInverse(e,t){t=t||new le;const s=this.a,r=this.b,n=this.c,o=this.d,a=this.tx,h=this.ty,l=1/(s*o+n*-r),c=e.x,f=e.y;return t.x=o*l*c+-n*l*f+(h*n-a*o)*l,t.y=s*l*f+-r*l*c+(-h*s+a*r)*l,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),s=Math.sin(e),r=this.a,n=this.c,o=this.tx;return this.a=r*t-this.b*s,this.b=r*s+this.b*t,this.c=n*t-this.d*s,this.d=n*s+this.d*t,this.tx=o*t-this.ty*s,this.ty=o*s+this.ty*t,this}append(e){const t=this.a,s=this.b,r=this.c,n=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*s+e.b*n,this.c=e.c*t+e.d*r,this.d=e.c*s+e.d*n,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*s+e.ty*n+this.ty,this}appendFrom(e,t){const s=e.a,r=e.b,n=e.c,o=e.d,a=e.tx,h=e.ty,l=t.a,c=t.b,f=t.c,m=t.d;return this.a=s*l+r*f,this.b=s*c+r*m,this.c=n*l+o*f,this.d=n*c+o*m,this.tx=a*l+h*f+t.tx,this.ty=a*c+h*m+t.ty,this}setTransform(e,t,s,r,n,o,a,h,l){return this.a=Math.cos(a+l)*n,this.b=Math.sin(a+l)*n,this.c=-Math.sin(a-h)*o,this.d=Math.cos(a-h)*o,this.tx=e-(s*this.a+r*this.c),this.ty=t-(s*this.b+r*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const s=this.a,r=this.c;this.a=s*e.a+this.b*e.c,this.b=s*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,s=this.b,r=this.c,n=this.d,o=e.pivot,a=-Math.atan2(-r,n),h=Math.atan2(s,t),l=Math.abs(a+h);return l<1e-5||Math.abs(Sr-l)<1e-5?(e.rotation=h,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=h),e.scale.x=Math.sqrt(t*t+s*s),e.scale.y=Math.sqrt(r*r+n*n),e.position.x=this.tx+(o.x*t+o.y*r),e.position.y=this.ty+(o.x*s+o.y*n),e}invert(){const e=this.a,t=this.b,s=this.c,r=this.d,n=this.tx,o=e*r-t*s;return this.a=r/o,this.b=-t/o,this.c=-s/o,this.d=e/o,this.tx=(s*this.ty-r*n)/o,this.ty=-(e*this.ty-t*n)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new X;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return Rr.identity()}static get shared(){return kr.identity()}}const kr=new X,Rr=new X,ke=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Re=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Pe=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Oe=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Wt=[],os=[],ut=Math.sign;function Pr(){for(let i=0;i<16;i++){const e=[];Wt.push(e);for(let t=0;t<16;t++){const s=ut(ke[i]*ke[t]+Pe[i]*Re[t]),r=ut(Re[i]*ke[t]+Oe[i]*Re[t]),n=ut(ke[i]*Pe[t]+Pe[i]*Oe[t]),o=ut(Re[i]*Pe[t]+Oe[i]*Oe[t]);for(let a=0;a<16;a++)if(ke[a]===s&&Re[a]===r&&Pe[a]===n&&Oe[a]===o){e.push(a);break}}}for(let i=0;i<16;i++){const e=new X;e.set(ke[i],Re[i],Pe[i],Oe[i],0,0),os.push(e)}}Pr();const U={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:i=>ke[i],uY:i=>Re[i],vX:i=>Pe[i],vY:i=>Oe[i],inv:i=>i&8?i&15:-i&7,add:(i,e)=>Wt[i][e],sub:(i,e)=>Wt[i][U.inv(e)],rotate180:i=>i^4,isVertical:i=>(i&3)===2,byDirection:(i,e)=>Math.abs(i)*2<=Math.abs(e)?e>=0?U.S:U.N:Math.abs(e)*2<=Math.abs(i)?i>0?U.E:U.W:e>0?i>0?U.SE:U.SW:i>0?U.NE:U.NW,matrixAppendRotationInv:(i,e,t=0,s=0)=>{const r=os[U.inv(e)];r.tx=t,r.ty=s,i.append(r)}},ct=[new le,new le,new le,new le];class de{constructor(e=0,t=0,s=0,r=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(s),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new de(0,0,0,0)}clone(){return new de(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,s,r=.5){const{width:n,height:o}=this;if(n<=0||o<=0)return!1;const a=this.x,h=this.y,l=s*(1-r),c=s-l,f=a-l,m=a+n+l,g=h-l,A=h+o+l,E=a+c,v=a+n-c,M=h+c,P=h+o-c;return e>=f&&e<=m&&t>=g&&t<=A&&!(e>E&&e<v&&t>M&&t<P)}intersects(e,t){if(!t){const Me=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=Me)return!1;const fe=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>fe}const s=this.left,r=this.right,n=this.top,o=this.bottom;if(r<=s||o<=n)return!1;const a=ct[0].set(e.left,e.top),h=ct[1].set(e.left,e.bottom),l=ct[2].set(e.right,e.top),c=ct[3].set(e.right,e.bottom);if(l.x<=a.x||h.y<=a.y)return!1;const f=Math.sign(t.a*t.d-t.b*t.c);if(f===0||(t.apply(a,a),t.apply(h,h),t.apply(l,l),t.apply(c,c),Math.max(a.x,h.x,l.x,c.x)<=s||Math.min(a.x,h.x,l.x,c.x)>=r||Math.max(a.y,h.y,l.y,c.y)<=n||Math.min(a.y,h.y,l.y,c.y)>=o))return!1;const m=f*(h.y-a.y),g=f*(a.x-h.x),A=m*s+g*n,E=m*r+g*n,v=m*s+g*o,M=m*r+g*o;if(Math.max(A,E,v,M)<=m*a.x+g*a.y||Math.min(A,E,v,M)>=m*c.x+g*c.y)return!1;const P=f*(a.y-l.y),S=f*(l.x-a.x),N=P*s+S*n,H=P*r+S*n,te=P*s+S*o,ie=P*r+S*o;return!(Math.max(N,H,te,ie)<=P*a.x+S*a.y||Math.min(N,H,te,ie)>=P*c.x+S*c.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),n=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(s-t,0),this.y=r,this.height=Math.max(n-r,0),this}ceil(e=1,t=.001){const s=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=s-this.x,this.height=r-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),n=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=s-t,this.y=r,this.height=n-r,this}getBounds(e){return e||(e=new de),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,s=e.y,r=e.x+e.width,n=e.y+e.height;return t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height&&r>=this.x&&r<this.x+this.width&&n>=this.y&&n<this.y+this.height}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const kt={default:-1};function we(i="default"){return kt[i]===void 0&&(kt[i]=-1),++kt[i]}const Si={},be="8.0.0",Qn="8.3.4";function ee(i,e,t=3){if(Si[e])return;let s=new Error().stack;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${i}`):(s=s.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${i}`),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${i}`),console.warn(s))),Si[e]=!0}const as=()=>{};function Ti(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function Mi(i){return!(i&i-1)&&!!i}function Or(i){const e={};for(const t in i)i[t]!==void 0&&(e[t]=i[t]);return e}const ki=Object.create(null);function Ir(i){const e=ki[i];return e===void 0&&(ki[i]=we("resource")),e}const hs=class ls extends at{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...ls.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){ee(be,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=Ir(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};hs.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let Fr=hs;const ds=class us extends at{constructor(e={}){super(),this.options=e,this.uid=we("textureSource"),this._resourceType="textureSource",this._resourceId=we("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...us.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new Fr(Or(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,s;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(s=this._style)==null||s.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=we("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,s){s||(s=this._resolution),e||(e=this.width),t||(t=this.height);const r=Math.round(e*s),n=Math.round(t*s);return this.width=r/s,this.height=n/s,this._resolution=s,this.pixelWidth===r&&this.pixelHeight===n?!1:(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=n,this.emit("resize",this),this._resourceId=we("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Mi(this.pixelWidth)&&Mi(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};ds.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let ce=ds;class oi extends ce{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let s=e.format;s||(t instanceof Float32Array?s="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?s="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?s="rgba16uint":(t instanceof Int8Array,s="bgra8unorm")),super({...e,resource:t,format:s}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}oi.extension=V.TextureSource;const Ri=new X;class Br{constructor(e,t){this.mapCoord=new X,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const s=this.mapCoord;for(let r=0;r<e.length;r+=2){const n=e[r],o=e[r+1];t[r]=n*s.a+o*s.c+s.tx,t[r+1]=n*s.b+o*s.d+s.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const s=e.orig,r=e.trim;r&&(Ri.set(s.width/r.width,0,0,s.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Ri));const n=e.source,o=this.uClampFrame,a=this.clampMargin/n._resolution,h=this.clampOffset/n._resolution;return o[0]=(e.frame.x+a+h)/n.width,o[1]=(e.frame.y+a+h)/n.height,o[2]=(e.frame.x+e.frame.width-a+h)/n.width,o[3]=(e.frame.y+e.frame.height-a+h)/n.height,this.uClampOffset[0]=this.clampOffset/n.pixelWidth,this.uClampOffset[1]=this.clampOffset/n.pixelHeight,this.isSimple=e.frame.width===n.width&&e.frame.height===n.height&&e.rotate===0,!0}}class Y extends at{constructor({source:e,label:t,frame:s,orig:r,trim:n,defaultAnchor:o,defaultBorders:a,rotate:h,dynamic:l}={}){if(super(),this.uid=we("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new de,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=(e==null?void 0:e.source)??new ce,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:c,height:f}=this._source;this.frame.width=c,this.frame.height=f}this.orig=r||this.frame,this.trim=n,this.rotate=h??0,this.defaultAnchor=o,this.defaultBorders=a,this.destroyed=!1,this.dynamic=l||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Br(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:s,height:r}=this._source,n=t.x/s,o=t.y/r,a=t.width/s,h=t.height/r;let l=this.rotate;if(l){const c=a/2,f=h/2,m=n+c,g=o+f;l=U.add(l,U.NW),e.x0=m+c*U.uX(l),e.y0=g+f*U.uY(l),l=U.add(l,2),e.x1=m+c*U.uX(l),e.y1=g+f*U.uY(l),l=U.add(l,2),e.x2=m+c*U.uX(l),e.y2=g+f*U.uY(l),l=U.add(l,2),e.x3=m+c*U.uX(l),e.y3=g+f*U.uY(l)}else e.x0=n,e.y0=o,e.x1=n+a,e.y1=o,e.x2=n+a,e.y2=o+h,e.x3=n,e.y3=o+h}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return ee(be,"Texture.baseTexture is now Texture.source"),this._source}}Y.EMPTY=new Y({label:"EMPTY",source:new ce({label:"EMPTY"})});Y.EMPTY.destroy=as;Y.WHITE=new Y({source:new oi({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Y.WHITE.destroy=as;function Lr(i,e,t){const{width:s,height:r}=t.orig,n=t.trim;if(n){const o=n.width,a=n.height;i.minX=n.x-e._x*s,i.maxX=i.minX+o,i.minY=n.y-e._y*r,i.maxY=i.minY+a}else i.minX=-e._x*s,i.maxX=i.minX+s,i.minY=-e._y*r,i.maxY=i.minY+r}const Pi=new X;class Ce{constructor(e=1/0,t=1/0,s=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Pi,this.minX=e,this.minY=t,this.maxX=s,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new de);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Pi,this}set(e,t,s,r){this.minX=e,this.minY=t,this.maxX=s,this.maxY=r}addFrame(e,t,s,r,n){n||(n=this.matrix);const o=n.a,a=n.b,h=n.c,l=n.d,c=n.tx,f=n.ty;let m=this.minX,g=this.minY,A=this.maxX,E=this.maxY,v=o*e+h*t+c,M=a*e+l*t+f;v<m&&(m=v),M<g&&(g=M),v>A&&(A=v),M>E&&(E=M),v=o*s+h*t+c,M=a*s+l*t+f,v<m&&(m=v),M<g&&(g=M),v>A&&(A=v),M>E&&(E=M),v=o*e+h*r+c,M=a*e+l*r+f,v<m&&(m=v),M<g&&(g=M),v>A&&(A=v),M>E&&(E=M),v=o*s+h*r+c,M=a*s+l*r+f,v<m&&(m=v),M<g&&(g=M),v>A&&(A=v),M>E&&(E=M),this.minX=m,this.minY=g,this.maxX=A,this.maxY=E}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,s=this.minY,r=this.maxX,n=this.maxY,{a:o,b:a,c:h,d:l,tx:c,ty:f}=e;let m=o*t+h*s+c,g=a*t+l*s+f;this.minX=m,this.minY=g,this.maxX=m,this.maxY=g,m=o*r+h*s+c,g=a*r+l*s+f,this.minX=m<this.minX?m:this.minX,this.minY=g<this.minY?g:this.minY,this.maxX=m>this.maxX?m:this.maxX,this.maxY=g>this.maxY?g:this.maxY,m=o*t+h*n+c,g=a*t+l*n+f,this.minX=m<this.minX?m:this.minX,this.minY=g<this.minY?g:this.minY,this.maxX=m>this.maxX?m:this.maxX,this.maxY=g>this.maxY?g:this.maxY,m=o*r+h*n+c,g=a*r+l*n+f,this.minX=m<this.minX?m:this.minX,this.minY=g<this.minY?g:this.minY,this.maxX=m>this.maxX?m:this.maxX,this.maxY=g>this.maxY?g:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,s,r){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<s&&(this.minY=s),this.maxY>r&&(this.maxY=r),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Ce(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,s,r){let n=this.minX,o=this.minY,a=this.maxX,h=this.maxY;r||(r=this.matrix);const l=r.a,c=r.b,f=r.c,m=r.d,g=r.tx,A=r.ty;for(let E=t;E<s;E+=2){const v=e[E],M=e[E+1],P=l*v+f*M+g,S=c*v+m*M+A;n=P<n?P:n,o=S<o?S:o,a=P>a?P:a,h=S>h?S:h}this.minX=n,this.minY=o,this.maxX=a,this.maxY=h}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var Gr={grad:.9,turn:360,rad:360/(2*Math.PI)},ge=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},$=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t+0},Q=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i>e?i:e},cs=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},Oi=function(i){return{r:Q(i.r,0,255),g:Q(i.g,0,255),b:Q(i.b,0,255),a:Q(i.a)}},Rt=function(i){return{r:$(i.r),g:$(i.g),b:$(i.b),a:$(i.a,3)}},Nr=/^#([0-9a-f]{3,8})$/i,ft=function(i){var e=i.toString(16);return e.length<2?"0"+e:e},fs=function(i){var e=i.r,t=i.g,s=i.b,r=i.a,n=Math.max(e,t,s),o=n-Math.min(e,t,s),a=o?n===e?(t-s)/o:n===t?2+(s-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:n?o/n*100:0,v:n/255*100,a:r}},ps=function(i){var e=i.h,t=i.s,s=i.v,r=i.a;e=e/360*6,t/=100,s/=100;var n=Math.floor(e),o=s*(1-t),a=s*(1-(e-n)*t),h=s*(1-(1-e+n)*t),l=n%6;return{r:255*[s,a,o,o,h,s][l],g:255*[h,s,s,a,o,o][l],b:255*[o,o,h,s,s,a][l],a:r}},Ii=function(i){return{h:cs(i.h),s:Q(i.s,0,100),l:Q(i.l,0,100),a:Q(i.a)}},Fi=function(i){return{h:$(i.h),s:$(i.s),l:$(i.l),a:$(i.a,3)}},Bi=function(i){return ps((t=(e=i).s,{h:e.h,s:(t*=((s=e.l)<50?s:100-s)/100)>0?2*t/(s+t)*100:0,v:s+t,a:e.a}));var e,t,s},rt=function(i){return{h:(e=fs(i)).h,s:(r=(200-(t=e.s))*(s=e.v)/100)>0&&r<200?t*s/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,s,r},Hr=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Dr=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ur=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Xr=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,jt={string:[[function(i){var e=Nr.exec(i);return e?(i=e[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?$(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?$(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var e=Ur.exec(i)||Xr.exec(i);return e?e[2]!==e[4]||e[4]!==e[6]?null:Oi({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(i){var e=Hr.exec(i)||Dr.exec(i);if(!e)return null;var t,s,r=Ii({h:(t=e[1],s=e[2],s===void 0&&(s="deg"),Number(t)*(Gr[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Bi(r)},"hsl"]],object:[[function(i){var e=i.r,t=i.g,s=i.b,r=i.a,n=r===void 0?1:r;return ge(e)&&ge(t)&&ge(s)?Oi({r:Number(e),g:Number(t),b:Number(s),a:Number(n)}):null},"rgb"],[function(i){var e=i.h,t=i.s,s=i.l,r=i.a,n=r===void 0?1:r;if(!ge(e)||!ge(t)||!ge(s))return null;var o=Ii({h:Number(e),s:Number(t),l:Number(s),a:Number(n)});return Bi(o)},"hsl"],[function(i){var e=i.h,t=i.s,s=i.v,r=i.a,n=r===void 0?1:r;if(!ge(e)||!ge(t)||!ge(s))return null;var o=function(a){return{h:cs(a.h),s:Q(a.s,0,100),v:Q(a.v,0,100),a:Q(a.a)}}({h:Number(e),s:Number(t),v:Number(s),a:Number(n)});return ps(o)},"hsv"]]},Li=function(i,e){for(var t=0;t<e.length;t++){var s=e[t][0](i);if(s)return[s,e[t][1]]}return[null,void 0]},Yr=function(i){return typeof i=="string"?Li(i.trim(),jt.string):typeof i=="object"&&i!==null?Li(i,jt.object):[null,void 0]},Pt=function(i,e){var t=rt(i);return{h:t.h,s:Q(t.s+100*e,0,100),l:t.l,a:t.a}},Ot=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},Gi=function(i,e){var t=rt(i);return{h:t.h,s:t.s,l:Q(t.l+100*e,0,100),a:t.a}},qt=function(){function i(e){this.parsed=Yr(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return $(Ot(this.rgba),2)},i.prototype.isDark=function(){return Ot(this.rgba)<.5},i.prototype.isLight=function(){return Ot(this.rgba)>=.5},i.prototype.toHex=function(){return e=Rt(this.rgba),t=e.r,s=e.g,r=e.b,o=(n=e.a)<1?ft($(255*n)):"","#"+ft(t)+ft(s)+ft(r)+o;var e,t,s,r,n,o},i.prototype.toRgb=function(){return Rt(this.rgba)},i.prototype.toRgbString=function(){return e=Rt(this.rgba),t=e.r,s=e.g,r=e.b,(n=e.a)<1?"rgba("+t+", "+s+", "+r+", "+n+")":"rgb("+t+", "+s+", "+r+")";var e,t,s,r,n},i.prototype.toHsl=function(){return Fi(rt(this.rgba))},i.prototype.toHslString=function(){return e=Fi(rt(this.rgba)),t=e.h,s=e.s,r=e.l,(n=e.a)<1?"hsla("+t+", "+s+"%, "+r+"%, "+n+")":"hsl("+t+", "+s+"%, "+r+"%)";var e,t,s,r,n},i.prototype.toHsv=function(){return e=fs(this.rgba),{h:$(e.h),s:$(e.s),v:$(e.v),a:$(e.a,3)};var e},i.prototype.invert=function(){return he({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},i.prototype.saturate=function(e){return e===void 0&&(e=.1),he(Pt(this.rgba,e))},i.prototype.desaturate=function(e){return e===void 0&&(e=.1),he(Pt(this.rgba,-e))},i.prototype.grayscale=function(){return he(Pt(this.rgba,-1))},i.prototype.lighten=function(e){return e===void 0&&(e=.1),he(Gi(this.rgba,e))},i.prototype.darken=function(e){return e===void 0&&(e=.1),he(Gi(this.rgba,-e))},i.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},i.prototype.alpha=function(e){return typeof e=="number"?he({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):$(this.rgba.a,3);var t},i.prototype.hue=function(e){var t=rt(this.rgba);return typeof e=="number"?he({h:e,s:t.s,l:t.l,a:t.a}):$(t.h)},i.prototype.isEqual=function(e){return this.toHex()===he(e).toHex()},i}(),he=function(i){return i instanceof qt?i:new qt(i)},Ni=[],Vr=function(i){i.forEach(function(e){Ni.indexOf(e)<0&&(e(qt,jt),Ni.push(e))})};function $r(i,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var r in t)s[t[r]]=r;var n={};i.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,h,l=s[this.toHex()];if(l)return l;if(o!=null&&o.closest){var c=this.toRgb(),f=1/0,m="black";if(!n.length)for(var g in t)n[g]=new i(t[g]).toRgb();for(var A in t){var E=(a=c,h=n[A],Math.pow(a.r-h.r,2)+Math.pow(a.g-h.g,2)+Math.pow(a.b-h.b,2));E<f&&(f=E,m=A)}return m}},e.string.push([function(o){var a=o.toLowerCase(),h=a==="transparent"?"#0000":t[a];return h?new i(h).toRgb():null},"name"])}Vr([$r]);const Ye=class et{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof et)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const s=typeof e;if(s!==typeof t)return!1;if(s==="number"||s==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((n,o)=>n===t[o]);if(e!==null&&t!==null){const n=Object.keys(e),o=Object.keys(t);return n.length!==o.length?!1:n.every(a=>e[a]===t[a])}return e===t}toRgba(){const[e,t,s,r]=this._components;return{r:e,g:t,b:s,a:r}}toRgb(){const[e,t,s]=this._components;return{r:e,g:t,b:s}}toRgbaString(){const[e,t,s]=this.toUint8RgbArray();return`rgba(${e},${t},${s},${this.alpha})`}toUint8RgbArray(e){const[t,s,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(s*255),e[2]=Math.round(r*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,s,r,n]=this._components;return e[0]=t,e[1]=s,e[2]=r,e[3]=n,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,s,r]=this._components;return e[0]=t,e[1]=s,e[2]=r,e}toNumber(){return this._int}toBgrNumber(){const[e,t,s]=this.toUint8RgbArray();return(s<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,s,r,n]=et._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=s,this._components[2]*=r,this._components[3]*=n,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let s=this._int>>16&255,r=this._int>>8&255,n=this._int&255;return t&&(s=s*e+.5|0,r=r*e+.5|0,n=n*e+.5|0),(e*255<<24)+(s<<16)+(r<<8)+n}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,s,r,n;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;t=(o>>16&255)/255,s=(o>>8&255)/255,r=(o&255)/255,n=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,s,r,n=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,s,r,n=255]=e,t/=255,s/=255,r/=255,n/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=et.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=he(e);o.isValid()&&({r:t,g:s,b:r,a:n}=o.rgba,t/=255,s/=255,r/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=s,this._components[2]=r,this._components[3]=n,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,s]=this._components;this._int=(e*255<<16)+(t*255<<8)+(s*255|0)}_clamp(e,t=0,s=1){return typeof e=="number"?Math.min(Math.max(e,t),s):(e.forEach((r,n)=>{e[n]=Math.min(Math.max(r,t),s)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof et||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};Ye.shared=new Ye;Ye._temp=new Ye;Ye.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let xt=Ye;const zr={cullArea:null,cullable:!1,cullableChildren:!0};class ai{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var s;let t;return this._index>0?t=this._pool[--this._index]:t=new this._classType,(s=t.init)==null||s.call(t,e),t}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class Wr{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new ai(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const s=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[s]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}}const Ct=new Wr,jr={get isCachedAsTexture(){var i;return!!((i=this.renderGroup)!=null&&i.isCachedAsTexture)},cacheAsTexture(i){typeof i=="boolean"&&i===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(i===!0?{}:i))},updateCacheTexture(){var i;(i=this.renderGroup)==null||i.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(i){ee("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(i)}};function qr(i,e,t){const s=i.length;let r;if(e>=s||t===0)return;t=e+t>s?s-e:t;const n=s-t;for(r=e;r<n;++r)i[r]=i[r+t];i.length=n}const Zr={allowChildren:!0,removeChildren(i=0,e){const t=e??this.children.length,s=t-i,r=[];if(s>0&&s<=t){for(let o=t-1;o>=i;o--){const a=this.children[o];a&&(r.push(a),a.parent=null)}qr(this.children,i,t);const n=this.renderGroup||this.parentRenderGroup;n&&n.removeChildren(r);for(let o=0;o<r.length;++o)this.emit("childRemoved",r[o],this,o),r[o].emit("removed",this);return r.length>0&&this._didViewChangeTick++,r}else if(s===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(i){const e=this.getChildAt(i);return this.removeChild(e)},getChildAt(i){if(i<0||i>=this.children.length)throw new Error(`getChildAt: Index (${i}) does not exist.`);return this.children[i]},setChildIndex(i,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(i),this.addChildAt(i,e)},getChildIndex(i){const e=this.children.indexOf(i);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(i,e){this.allowChildren||ee(be,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${i}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(i.parent){const r=i.parent.children.indexOf(i);if(i.parent===this&&r===e)return i;r!==-1&&i.parent.children.splice(r,1)}e===t.length?t.push(i):t.splice(e,0,i),i.parent=this,i.didChange=!0,i._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(i),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",i,this,e),i.emit("added",this),i},swapChildren(i,e){if(i===e)return;const t=this.getChildIndex(i),s=this.getChildIndex(e);this.children[t]=e,this.children[s]=i;const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var i;(i=this.parent)==null||i.removeChild(this)},reparentChild(...i){return i.length===1?this.reparentChildAt(i[0],this.children.length):(i.forEach(e=>this.reparentChildAt(e,this.children.length)),i[0])},reparentChildAt(i,e){if(i.parent===this)return this.setChildIndex(i,e),i;const t=i.worldTransform.clone();i.removeFromParent(),this.addChildAt(i,e);const s=this.worldTransform.clone();return s.invert(),t.prepend(s),i.setFromMatrix(t),i}},Kr={collectRenderables(i,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(i,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,i):this.collectRenderablesWithEffects(i,e,t))},collectRenderablesSimple(i,e,t){const s=this.children,r=s.length;for(let n=0;n<r;n++)s[n].collectRenderables(i,e,t)},collectRenderablesWithEffects(i,e,t){const{renderPipes:s}=e;for(let r=0;r<this.effects.length;r++){const n=this.effects[r];s[n.pipe].push(n,this,i)}this.collectRenderablesSimple(i,e,t);for(let r=this.effects.length-1;r>=0;r--){const n=this.effects[r];s[n.pipe].pop(n,this,i)}}};class Hi{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class Jr{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const s=this._tests[t];if(s.test(e))return Ct.get(s.maskClass,e)}return e}returnMaskEffect(e){Ct.return(e)}}const Zt=new Jr;ue.handleByList(V.MaskEffect,Zt._effectClasses);const Qr={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0)},addEffect(i){this.effects.indexOf(i)===-1&&(this.effects.push(i),this.effects.sort((t,s)=>t.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(i){const e=this.effects.indexOf(i);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(i){const e=this._maskEffect;(e==null?void 0:e.mask)!==i&&(e&&(this.removeEffect(e),Zt.returnMaskEffect(e),this._maskEffect=null),i!=null&&(this._maskEffect=Zt.getMaskEffect(i),this.addEffect(this._maskEffect)))},setMask(i){this._maskOptions={...this._maskOptions,...i},i.mask&&(this.mask=i.mask),this._markStructureAsChanged()},get mask(){var i;return(i=this._maskEffect)==null?void 0:i.mask},set filters(i){var n;!Array.isArray(i)&&i&&(i=[i]);const e=this._filterEffect||(this._filterEffect=new Hi);i=i;const t=(i==null?void 0:i.length)>0,s=((n=e.filters)==null?void 0:n.length)>0,r=t!==s;i=Array.isArray(i)?i.slice(0):i,e.filters=Object.freeze(i),r&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=i??null))},get filters(){var i;return(i=this._filterEffect)==null?void 0:i.filters},set filterArea(i){this._filterEffect||(this._filterEffect=new Hi),this._filterEffect.filterArea=i},get filterArea(){var i;return(i=this._filterEffect)==null?void 0:i.filterArea}},en={label:null,get name(){return ee(be,"Container.name property has been removed, use Container.label instead"),this.label},set name(i){ee(be,"Container.name property has been removed, use Container.label instead"),this.label=i},getChildByName(i,e=!1){return this.getChildByLabel(i,e)},getChildByLabel(i,e=!1){const t=this.children;for(let s=0;s<t.length;s++){const r=t[s];if(r.label===i||i instanceof RegExp&&i.test(r.label))return r}if(e)for(let s=0;s<t.length;s++){const n=t[s].getChildByLabel(i,!0);if(n)return n}return null},getChildrenByLabel(i,e=!1,t=[]){const s=this.children;for(let r=0;r<s.length;r++){const n=s[r];(n.label===i||i instanceof RegExp&&i.test(n.label))&&t.push(n)}if(e)for(let r=0;r<s.length;r++)s[r].getChildrenByLabel(i,!0,t);return t}},q=new ai(X),xe=new ai(Ce),tn=new X,sn={getFastGlobalBounds(i,e){e||(e=new Ce),e.clear(),this._getGlobalBoundsRecursive(!!i,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(i,e,t){let s=e;if(i&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const r=!!this.effects.length;if((this.renderGroup||r)&&(s=xe.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const o=this.bounds;s.addFrame(o.minX,o.minY,o.maxX,o.maxY,this.groupTransform)}const n=this.children;for(let o=0;o<n.length;o++)n[o]._getGlobalBoundsRecursive(i,s,t)}if(r){let n=!1;const o=this.renderGroup||this.parentRenderGroup;for(let a=0;a<this.effects.length;a++)this.effects[a].addBounds&&(n||(n=!0,s.applyMatrix(o.worldTransform)),this.effects[a].addBounds(s,!0));n&&(s.applyMatrix(o.worldTransform.copyTo(tn).invert()),e.addBounds(s,this.relativeGroupTransform)),e.addBounds(s),xe.return(s)}else this.renderGroup&&(e.addBounds(s,this.relativeGroupTransform),xe.return(s))}};function _s(i,e,t){t.clear();let s,r;return i.parent?e?s=i.parent.worldTransform:(r=q.get().identity(),s=hi(i,r)):s=X.IDENTITY,ms(i,t,s,e),r&&q.return(r),t.isValid||t.set(0,0,0,0),t}function ms(i,e,t,s){var a,h;if(!i.visible||!i.measurable)return;let r;s?r=i.worldTransform:(i.updateLocalTransform(),r=q.get(),r.appendFrom(i.localTransform,t));const n=e,o=!!i.effects.length;if(o&&(e=xe.get().clear()),i.boundsArea)e.addRect(i.boundsArea,r);else{i.bounds&&(e.matrix=r,e.addBounds(i.bounds));for(let l=0;l<i.children.length;l++)ms(i.children[l],e,r,s)}if(o){for(let l=0;l<i.effects.length;l++)(h=(a=i.effects[l]).addBounds)==null||h.call(a,e);n.addBounds(e,X.IDENTITY),xe.return(e)}s||q.return(r)}function hi(i,e){const t=i.parent;return t&&(hi(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function rn(i,e){if(i===16777215||!e)return e;if(e===16777215||!i)return i;const t=i>>16&255,s=i>>8&255,r=i&255,n=e>>16&255,o=e>>8&255,a=e&255,h=t*n/255|0,l=s*o/255|0,c=r*a/255|0;return(h<<16)+(l<<8)+c}const Di=16777215;function Ui(i,e){return i===Di?e:e===Di?i:rn(i,e)}function bt(i){return((i&255)<<16)+(i&65280)+(i>>16&255)}const nn={getGlobalAlpha(i){if(i)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(i,e){if(e)return i.copyFrom(this.worldTransform);this.updateLocalTransform();const t=hi(this,q.get().identity());return i.appendFrom(this.localTransform,t),q.return(t),i},getGlobalTint(i){if(i)return this.renderGroup?bt(this.renderGroup.worldColor):this.parentRenderGroup?bt(Ui(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=Ui(e,t.localColor),t=t.parent;return bt(e)}};let It=0;const Xi=500;function Ie(...i){It!==Xi&&(It++,It===Xi?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...i))}function gs(i,e,t){return e.clear(),t||(t=X.IDENTITY),ys(i,e,t,i,!0),e.isValid||e.set(0,0,0,0),e}function ys(i,e,t,s,r){var h,l;let n;if(r)n=q.get(),n=t.copyTo(n);else{if(!i.visible||!i.measurable)return;i.updateLocalTransform();const c=i.localTransform;n=q.get(),n.appendFrom(c,t)}const o=e,a=!!i.effects.length;if(a&&(e=xe.get().clear()),i.boundsArea)e.addRect(i.boundsArea,n);else{i.renderPipeId&&(e.matrix=n,e.addBounds(i.bounds));const c=i.children;for(let f=0;f<c.length;f++)ys(c[f],e,n,s,!1)}if(a){for(let c=0;c<i.effects.length;c++)(l=(h=i.effects[c]).addLocalBounds)==null||l.call(h,e,s);o.addBounds(e,X.IDENTITY),xe.return(e)}q.return(n)}function xs(i,e){const t=i.children;for(let s=0;s<t.length;s++){const r=t[s],n=r.uid,o=(r._didViewChangeTick&65535)<<16|r._didContainerChangeTick&65535,a=e.index;(e.data[a]!==n||e.data[a+1]!==o)&&(e.data[e.index]=n,e.data[e.index+1]=o,e.didChange=!0),e.index=a+2,r.children.length&&xs(r,e)}return e.didChange}const on=new X,an={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(i,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=i/e*t:this.scale.x=t},_setHeight(i,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=i/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Ce});const i=this._localBoundsCacheData;return i.index=1,i.didChange=!1,i.data[0]!==this._didViewChangeTick&&(i.didChange=!0,i.data[0]=this._didViewChangeTick),xs(this,i),i.didChange&&gs(this,i.localBounds,on),i.localBounds},getBounds(i,e){return _s(this,i,e||new Ce)}},hn={_onRender:null,set onRender(i){const e=this.renderGroup||this.parentRenderGroup;if(!i){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=i},get onRender(){return this._onRender}},ln={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(i){this._zIndex!==i&&(this._zIndex=i,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(dn))}};function dn(i,e){return i._zIndex-e._zIndex}const un={getGlobalPosition(i=new le,e=!1){return this.parent?this.parent.toGlobal(this._position,i,e):(i.x=this._position.x,i.y=this._position.y),i},toGlobal(i,e,t=!1){const s=this.getGlobalTransform(q.get(),t);return e=s.apply(i,e),q.return(s),e},toLocal(i,e,t,s){e&&(i=e.toGlobal(i,t,s));const r=this.getGlobalTransform(q.get(),s);return t=r.applyInverse(i,t),q.return(r),t}};class cn{constructor(){this.uid=we("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let fn=0;class pn{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1}createTexture(e,t,s){const r=new ce({...this.textureOptions,width:e,height:t,resolution:1,antialias:s,autoGarbageCollect:!1});return new Y({source:r,label:`texturePool_${fn++}`})}getOptimalTexture(e,t,s=1,r){let n=Math.ceil(e*s-1e-6),o=Math.ceil(t*s-1e-6);n=Ti(n),o=Ti(o);const a=(n<<17)+(o<<1)+(r?1:0);this._texturePool[a]||(this._texturePool[a]=[]);let h=this._texturePool[a].pop();return h||(h=this.createTexture(n,o,r)),h.source._resolution=s,h.source.width=n/s,h.source.height=o/s,h.source.pixelWidth=n,h.source.pixelHeight=o,h.frame.x=0,h.frame.y=0,h.frame.width=e,h.frame.height=t,h.updateUvs(),this._poolKeyHash[h.uid]=a,h}getSameSizeTexture(e,t=!1){const s=e.source;return this.getOptimalTexture(e.width,e.height,s._resolution,t)}returnTexture(e){const t=this._poolKeyHash[e.uid];this._texturePool[t].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const s=this._texturePool[t];if(s)for(let r=0;r<s.length;r++)s[r].destroy(!0)}this._texturePool={}}}const _n=new pn;class mn{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new X,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new cn,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let s=0;s<t.length;s++){const r=t[s];r._updateFlags=15,this.addChild(r)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(_n.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let s=0;s<t.length;s++)this.addChild(t[s])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let s=0;s<t.length;s++)this.removeChild(t[s])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let s=0;s<t.length;s++)this._getChildren(t[s],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const s=e.children;for(let r=0;r<s.length;r++)this._getChildren(s[r],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new X),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new X),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new X),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function gn(i,e,t={}){for(const s in e)!t[s]&&e[s]!==void 0&&(i[s]=e[s])}const Ft=new J(null),Bt=new J(null),Lt=new J(null,1,1),Yi=1,yn=2,Gt=4;class Te extends at{constructor(e={}){var t,s;super(),this.uid=we("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new X,this.relativeGroupTransform=new X,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new J(this,0,0),this._scale=Lt,this._pivot=Bt,this._skew=Ft,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],gn(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(r=>this.addChild(r)),(s=e.parent)==null||s.addChild(this)}static mixin(e){ee("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),ue.mixin(Te,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||ee(be,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let r=0;r<e.length;r++)this.addChild(e[r]);return e[0]}const t=e[0],s=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),s&&(s.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,s&&s.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let r=0;r<e.length;r++)this.removeChild(e[r]);return e[0]}const t=e[0],s=this.children.indexOf(t);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,s),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=Ct.get(mn,this),this.groupTransform=X.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),Ct.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new X),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*Tr}set angle(e){this.rotation=e*Mr}get pivot(){return this._pivot===Bt&&(this._pivot=new J(this,0,0)),this._pivot}set pivot(e){this._pivot===Bt&&(this._pivot=new J(this,0,0)),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===Ft&&(this._skew=new J(this,0,0)),this._skew}set skew(e){this._skew===Ft&&(this._skew=new J(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Lt&&(this._scale=new J(this,1,1)),this._scale}set scale(e){this._scale===Lt&&(this._scale=new J(this,0,0)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const s=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,s.width),t!==void 0&&this._setHeight(t,s.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,s=this._scale,r=this._pivot,n=this._position,o=s._x,a=s._y,h=r._x,l=r._y;t.a=this._cx*o,t.b=this._sx*o,t.c=this._cy*a,t.d=this._sy*a,t.tx=n._x-(h*t.a+l*t.c),t.ty=n._y-(h*t.b+l*t.d)}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=Yi,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const s=xt.shared.setValue(e??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=Yi,this._onUpdate())}get tint(){return bt(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=yn,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Gt,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Gt,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=Gt,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var r;if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&t)for(let n=0;n<t.length;++n)t[n].destroy(e);(r=this.renderGroup)==null||r.destroy(),this.renderGroup=null}}ue.mixin(Te,Zr,sn,un,hn,an,Qr,en,ln,zr,jr,nn,Kr);class xn extends Te{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new Ce(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:s,y:r}=e;return s>=t.minX&&s<=t.maxX&&r>=t.minY&&r<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){super.destroy(e),this._bounds=null}collectRenderablesSimple(e,t,s){const{renderPipes:r,renderableGC:n}=t;r.blendMode.setBlendMode(this,this.groupBlendMode,e),r[this.renderPipeId].addRenderable(this,e),n.addRenderable(this),this.didViewUpdate=!1;const a=this.children,h=a.length;for(let l=0;l<h;l++)a[l].collectRenderables(e,t,s)}}class Ve extends xn{constructor(e=Y.EMPTY){e instanceof Y&&(e={texture:e});const{texture:t=Y.EMPTY,anchor:s,roundPixels:r,width:n,height:o,...a}=e;super({label:"Sprite",...a}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new J({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=r??!1,n!==void 0&&(this.width=n),o!==void 0&&(this.height=o)}static from(e,t=!1){return e instanceof Y?new Ve(e):new Ve(Y.from(e,t))}set texture(e){e||(e=Y.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Lr(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return ee("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,s=this._bounds,{width:r,height:n}=t.orig;s.minX=-e._x*r,s.maxX=s.minX+r,s.minY=-e._y*n,s.maxY=s.minY+n}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const bn=new Ce;function bs(i,e,t){const s=bn;i.measurable=!0,_s(i,t,s),e.addBoundsMask(s),i.measurable=!1}function vs(i,e,t){const s=xe.get();i.measurable=!0;const r=q.get().identity(),n=ws(i,t,r);gs(i,s,n),i.measurable=!1,e.addBoundsMask(s),q.return(r),xe.return(s)}function ws(i,e,t){return i?(i!==e&&(ws(i.parent,e,t),i.updateLocalTransform(),t.append(i.localTransform)),t):(Ie("Mask bounds, renderable is not inside the root container"),t)}class As{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Ve),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(e,t){this.inverse||bs(this.mask,e,t)}addLocalBounds(e,t){vs(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof Ve}}As.extension=V.MaskEffect;class Cs{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}Cs.extension=V.MaskEffect;class Es{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(e,t){bs(this.mask,e,t)}addLocalBounds(e,t){vs(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof Te}}Es.extension=V.MaskEffect;const vn={createCanvas:(i,e)=>{const t=document.createElement("canvas");return t.width=i,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(i,e)=>fetch(i,e),parseXML:i=>new DOMParser().parseFromString(i,"text/xml")};let Vi=vn;const $e={get(){return Vi},set(i){Vi=i}};class Ss extends ce{constructor(e){e.resource||(e.resource=$e.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,s=this._resolution){const r=super.resize(e,t,s);return r&&this.resizeCanvas(),r}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Ss.extension=V.TextureSource;class Ts extends ce{constructor(e){if(e.resource&&globalThis.HTMLImageElement&&e.resource instanceof HTMLImageElement){const t=$e.get().createCanvas(e.resource.width,e.resource.height);t.getContext("2d").drawImage(e.resource,0,0,e.resource.width,e.resource.height),e.resource=t,Ie("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}Ts.extension=V.TextureSource;var Kt=(i=>(i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",i))(Kt||{});class Nt{constructor(e,t=null,s=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=s,this._once=r}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const Ms=class K{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Nt(null,null,1/0),this.deltaMS=1/K.targetFPMS,this.elapsedMS=1/K.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,s=Kt.NORMAL){return this._addListener(new Nt(e,t,s))}addOnce(e,t,s=Kt.NORMAL){return this._addListener(new Nt(e,t,s,!0))}_addListener(e){let t=this._head.next,s=this._head;if(!t)e.connect(s);else{for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}return this._startIfPossible(),this}remove(e,t){let s=this._head.next;for(;s;)s.match(e,t)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*K.targetFPMS;const s=this._head;let r=s.next;for(;r;)r=r.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,t)/1e3,K.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!K._shared){const e=K._shared=new K;e.autoStart=!0,e._protected=!0}return K._shared}static get system(){if(!K._system){const e=K._system=new K;e.autoStart=!0,e._protected=!0}return K._system}};Ms.targetFPMS=.06;let pt=Ms,Ht;async function wn(){return Ht??(Ht=(async()=>{var o;const e=document.createElement("canvas").getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(a=>{const h=document.createElement("video");h.onloadeddata=()=>a(h),h.onerror=()=>a(null),h.autoplay=!1,h.crossOrigin="anonymous",h.preload="auto",h.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",h.load()});if(!t)return"premultiply-alpha-on-upload";const s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const n=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,n),e.deleteFramebuffer(r),e.deleteTexture(s),(o=e.getExtension("WEBGL_lose_context"))==null||o.loseContext(),n[0]<=n[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Ht}const Et=class ks extends ce{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...ks.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=pt.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await wn(),this._load=new Promise((s,r)=>{this.isValid?s(this):(this._resolve=s,this._reject=r,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(pt.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(pt.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(pt.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};Et.extension=V.TextureSource;Et.defaultOptions={...ce.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Et.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let An=Et;const Ne=(i,e,t=!1)=>(Array.isArray(i)||(i=[i]),e?i.map(s=>typeof s=="string"||t?e(s):s):i);class Cn{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||Ie(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const s=Ne(e);let r;for(let h=0;h<this.parsers.length;h++){const l=this.parsers[h];if(l.test(t)){r=l.getCacheableAssets(s,t);break}}const n=new Map(Object.entries(r||{}));r||s.forEach(h=>{n.set(h,t)});const o=[...n.keys()],a={cacheKeys:o,keys:s};s.forEach(h=>{this._cacheMap.set(h,a)}),o.forEach(h=>{const l=r?r[h]:t;this._cache.has(h)&&this._cache.get(h)!==l&&Ie("[Cache] already has key:",h),this._cache.set(h,n.get(h))})}remove(e){if(!this._cacheMap.has(e)){Ie(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(r=>{this._cache.delete(r)}),t.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const He=new Cn,Jt=[];ue.handleByList(V.TextureSource,Jt);function Rs(i={}){const e=i&&i.resource,t=e?i.resource:i,s=e?i:{resource:i};for(let r=0;r<Jt.length;r++){const n=Jt[r];if(n.test(t))return new n(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function En(i={},e=!1){const t=i&&i.resource,s=t?i.resource:i,r=t?i:{resource:i};if(!e&&He.has(s))return He.get(s);const n=new Y({source:Rs(r)});return n.on("destroy",()=>{He.has(s)&&He.remove(s)}),e||He.set(s,n),n}function Sn(i,e=!1){return typeof i=="string"?He.get(i):i instanceof ce?new Y({source:i}):En(i,e)}Y.from=Sn;ce.from=Rs;ue.add(As,Cs,Es,An,Ts,Ss,oi);var Ps=(i=>(i[i.Low=0]="Low",i[i.Normal=1]="Normal",i[i.High=2]="High",i))(Ps||{});function se(i){if(typeof i!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(i)}`)}function Ze(i){return i.split("?")[0].split("#")[0]}function Tn(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Mn(i,e,t){return i.replace(new RegExp(Tn(e),"g"),t)}function kn(i,e){let t="",s=0,r=-1,n=0,o=-1;for(let a=0;a<=i.length;++a){if(a<i.length)o=i.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(r===a-1||n===1))if(r!==a-1&&n===2){if(t.length<2||s!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const h=t.lastIndexOf("/");if(h!==t.length-1){h===-1?(t="",s=0):(t=t.slice(0,h),s=t.length-1-t.lastIndexOf("/")),r=a,n=0;continue}}else if(t.length===2||t.length===1){t="",s=0,r=a,n=0;continue}}}else t.length>0?t+=`/${i.slice(r+1,a)}`:t=i.slice(r+1,a),s=a-r-1;r=a,n=0}else o===46&&n!==-1?++n:n=-1}return t}const ot={toPosix(i){return Mn(i,"\\","/")},isUrl(i){return/^https?:/.test(this.toPosix(i))},isDataUrl(i){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(i)},isBlobUrl(i){return i.startsWith("blob:")},hasProtocol(i){return/^[^/:]+:/.test(this.toPosix(i))},getProtocol(i){se(i),i=this.toPosix(i);const e=/^file:\/\/\//.exec(i);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(i);return t?t[0]:""},toAbsolute(i,e,t){if(se(i),this.isDataUrl(i)||this.isBlobUrl(i))return i;const s=Ze(this.toPosix(e??$e.get().getBaseUrl())),r=Ze(this.toPosix(t??this.rootname(s)));return i=this.toPosix(i),i.startsWith("/")?ot.join(r,i.slice(1)):this.isAbsolute(i)?i:this.join(s,i)},normalize(i){if(se(i),i.length===0)return".";if(this.isDataUrl(i)||this.isBlobUrl(i))return i;i=this.toPosix(i);let e="";const t=i.startsWith("/");this.hasProtocol(i)&&(e=this.rootname(i),i=i.slice(e.length));const s=i.endsWith("/");return i=kn(i),i.length>0&&s&&(i+="/"),t?`/${i}`:e+i},isAbsolute(i){return se(i),i=this.toPosix(i),this.hasProtocol(i)?!0:i.startsWith("/")},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const s=i[t];if(se(s),s.length>0)if(e===void 0)e=s;else{const r=i[t-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?e+=`/../${s}`:e+=`/${s}`}}return e===void 0?".":this.normalize(e)},dirname(i){if(se(i),i.length===0)return".";i=this.toPosix(i);let e=i.charCodeAt(0);const t=e===47;let s=-1,r=!0;const n=this.getProtocol(i),o=i;i=i.slice(n.length);for(let a=i.length-1;a>=1;--a)if(e=i.charCodeAt(a),e===47){if(!r){s=a;break}}else r=!1;return s===-1?t?"/":this.isUrl(o)?n+i:n:t&&s===1?"//":n+i.slice(0,s)},rootname(i){se(i),i=this.toPosix(i);let e="";if(i.startsWith("/")?e="/":e=this.getProtocol(i),this.isUrl(i)){const t=i.indexOf("/",e.length);t!==-1?e=i.slice(0,t):e=i,e.endsWith("/")||(e+="/")}return e},basename(i,e){se(i),e&&se(e),i=Ze(this.toPosix(i));let t=0,s=-1,r=!0,n;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";let o=e.length-1,a=-1;for(n=i.length-1;n>=0;--n){const h=i.charCodeAt(n);if(h===47){if(!r){t=n+1;break}}else a===-1&&(r=!1,a=n+1),o>=0&&(h===e.charCodeAt(o)?--o===-1&&(s=n):(o=-1,s=a))}return t===s?s=a:s===-1&&(s=i.length),i.slice(t,s)}for(n=i.length-1;n>=0;--n)if(i.charCodeAt(n)===47){if(!r){t=n+1;break}}else s===-1&&(r=!1,s=n+1);return s===-1?"":i.slice(t,s)},extname(i){se(i),i=Ze(this.toPosix(i));let e=-1,t=0,s=-1,r=!0,n=0;for(let o=i.length-1;o>=0;--o){const a=i.charCodeAt(o);if(a===47){if(!r){t=o+1;break}continue}s===-1&&(r=!1,s=o+1),a===46?e===-1?e=o:n!==1&&(n=1):e!==-1&&(n=-1)}return e===-1||s===-1||n===0||n===1&&e===s-1&&e===t+1?"":i.slice(e,s)},parse(i){se(i);const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;i=Ze(this.toPosix(i));let t=i.charCodeAt(0);const s=this.isAbsolute(i);let r;e.root=this.rootname(i),s||this.hasProtocol(i)?r=1:r=0;let n=-1,o=0,a=-1,h=!0,l=i.length-1,c=0;for(;l>=r;--l){if(t=i.charCodeAt(l),t===47){if(!h){o=l+1;break}continue}a===-1&&(h=!1,a=l+1),t===46?n===-1?n=l:c!==1&&(c=1):n!==-1&&(c=-1)}return n===-1||a===-1||c===0||c===1&&n===a-1&&n===o+1?a!==-1&&(o===0&&s?e.base=e.name=i.slice(1,a):e.base=e.name=i.slice(o,a)):(o===0&&s?(e.name=i.slice(1,n),e.base=i.slice(1,a)):(e.name=i.slice(o,n),e.base=i.slice(o,a)),e.ext=i.slice(n,a)),e.dir=this.dirname(i),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function Os(i,e,t,s,r){const n=e[t];for(let o=0;o<n.length;o++){const a=n[o];t<e.length-1?Os(i.replace(s[t],a),e,t+1,s,r):r.push(i.replace(s[t],a))}}function Rn(i){const e=/\{(.*?)\}/g,t=i.match(e),s=[];if(t){const r=[];t.forEach(n=>{const o=n.substring(1,n.length-1).split(",");r.push(o)}),Os(i,r,0,t,s)}else s.push(i);return s}const $i=i=>!Array.isArray(i);class Is{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`).join("&")}}getAlias(e){const{alias:t,src:s}=e;return Ne(t||s,n=>typeof n=="string"?n:Array.isArray(n)?n.map(o=>(o==null?void 0:o.src)??o):n!=null&&n.src?n.src:n,!0)}addManifest(e){this._manifest&&Ie("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const s=[];let r=t;Array.isArray(t)||(r=Object.entries(t).map(([n,o])=>typeof o=="string"||Array.isArray(o)?{alias:n,src:o}:{alias:n,...o})),r.forEach(n=>{const o=n.src,a=n.alias;let h;if(typeof a=="string"){const l=this._createBundleAssetId(e,a);s.push(l),h=[a,l]}else{const l=a.map(c=>this._createBundleAssetId(e,c));s.push(...l),h=[...a,...l]}this.add({...n,alias:h,src:o})}),this._bundles[e]=s}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let s;s=n=>{this.hasKey(n)&&Ie(`[Resolver] already has key: ${n} overwriting`)},Ne(t).forEach(n=>{const{src:o}=n;let{data:a,format:h,loadParser:l}=n;const c=Ne(o).map(g=>typeof g=="string"?Rn(g):Array.isArray(g)?g:[g]),f=this.getAlias(n);Array.isArray(f)?f.forEach(s):s(f);const m=[];c.forEach(g=>{g.forEach(A=>{let E={};if(typeof A!="object"){E.src=A;for(let v=0;v<this._parsers.length;v++){const M=this._parsers[v];if(M.test(A)){E=M.parse(A);break}}}else a=A.data??a,h=A.format??h,l=A.loadParser??l,E={...E,...A};if(!f)throw new Error(`[Resolver] alias is undefined for this asset: ${E.src}`);E=this._buildResolvedAsset(E,{aliases:f,data:a,format:h,loadParser:l}),m.push(E)})}),f.forEach(g=>{this._assetMap[g]=m})})}resolveBundle(e){const t=$i(e);e=Ne(e);const s={};return e.forEach(r=>{const n=this._bundles[r];if(n){const o=this.resolve(n),a={};for(const h in o){const l=o[h];a[this._extractAssetIdFromBundle(r,h)]=l}s[r]=a}}),t?s[e[0]]:s}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const s={};for(const r in t)s[r]=t[r].src;return s}return t.src}resolve(e){const t=$i(e);e=Ne(e);const s={};return e.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let n=this._assetMap[r];const o=this._getPreferredOrder(n);o==null||o.priority.forEach(a=>{o.params[a].forEach(h=>{const l=n.filter(c=>c[a]?c[a]===h:!1);l.length&&(n=l)})}),this._resolverHash[r]=n[0]}else this._resolverHash[r]=this._buildResolvedAsset({alias:[r],src:r},{});s[r]=this._resolverHash[r]}),t?s[e[0]]:s}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const s=e[t],r=this._preferredOrder.find(n=>n.params.format.includes(s.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:s,data:r,loadParser:n,format:o}=t;return(this._basePath||this._rootPath)&&(e.src=ot.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=s??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...r||{},...e.data},e.loadParser=n??e.loadParser,e.format=o??e.format??Pn(e.src),e}}Is.RETINA_PREFIX=/@([0-9\.]+)x/;function Pn(i){return i.split(".").pop().split("?").shift().split("#").shift()}const zi=(i,e)=>{const t=e.split("?")[1];return t&&(i+=`?${t}`),i},Fs=class tt{constructor(e,t){this.linkedSheets=[],this._texture=e instanceof Y?e:null,this.textureSource=e.source,this.textures={},this.animations={},this.data=t;const s=parseFloat(t.meta.scale);s?(this.resolution=s,e.source.resolution=this.resolution):this.resolution=e.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=tt.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const s=tt.BATCH_SIZE;for(;t-e<s&&t<this._frameKeys.length;){const r=this._frameKeys[t],n=this._frames[r],o=n.frame;if(o){let a=null,h=null;const l=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,c=new de(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);n.rotated?a=new de(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new de(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(h=new de(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[r]=new Y({source:this.textureSource,frame:a,orig:c,trim:h,rotate:n.rotated?2:0,defaultAnchor:n.anchor,defaultBorders:n.borders,label:r.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let s=0;s<e[t].length;s++){const r=e[t][s];this.animations[t].push(this.textures[r])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*tt.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*tt.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};Fs.BATCH_SIZE=1e3;let Wi=Fs;const On=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function Bs(i,e,t){const s={};if(i.forEach(r=>{s[r]=e}),Object.keys(e.textures).forEach(r=>{s[r]=e.textures[r]}),!t){const r=ot.dirname(i[0]);e.linkedSheets.forEach((n,o)=>{const a=Bs([`${r}/${e.data.meta.related_multi_packs[o]}`],n,!0);Object.assign(s,a)})}return s}const In={extension:V.Asset,cache:{test:i=>i instanceof Wi,getCacheableAssets:(i,e)=>Bs(i,e,!1)},resolver:{extension:{type:V.ResolveParser,name:"resolveSpritesheet"},test:i=>{const t=i.split("?")[0].split("."),s=t.pop(),r=t.pop();return s==="json"&&On.includes(r)},parse:i=>{var t;const e=i.split(".");return{resolution:parseFloat(((t=Is.RETINA_PREFIX.exec(i))==null?void 0:t[1])??"1"),format:e[e.length-2],src:i}}},loader:{name:"spritesheetLoader",extension:{type:V.LoadParser,priority:Ps.Normal,name:"spritesheetLoader"},async testParse(i,e){return ot.extname(e.src).toLowerCase()===".json"&&!!i.frames},async parse(i,e,t){var c,f;const{texture:s,imageFilename:r,textureOptions:n}=(e==null?void 0:e.data)??{};let o=ot.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(s instanceof Y)a=s;else{const m=zi(o+(r??i.meta.image),e.src);a=(await t.load([{src:m,data:n}]))[m]}const h=new Wi(a.source,i);await h.parse();const l=(c=i==null?void 0:i.meta)==null?void 0:c.related_multi_packs;if(Array.isArray(l)){const m=[];for(const A of l){if(typeof A!="string")continue;let E=o+A;(f=e.data)!=null&&f.ignoreMultiPack||(E=zi(E,e.src),m.push(t.load({src:E,data:{textureOptions:n,ignoreMultiPack:!0}})))}const g=await Promise.all(m);h.linkedSheets=g,g.forEach(A=>{A.linkedSheets=[h].concat(h.linkedSheets.filter(E=>E!==A))})}return h},async unload(i,e,t){await t.unload(i.textureSource._sourceOrigin),i.destroy(!1)}}};ue.add(In);const Qt=[];ue.handleByNamedList(V.Environment,Qt);async function Fn(i){if(!i)for(let e=0;e<Qt.length;e++){const t=Qt[e];if(t.value.test()){await t.value.load();return}}}let Ke;function Bn(){if(typeof Ke=="boolean")return Ke;try{Ke=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Ke=!1}return Ke}var _t={exports:{}},ji;function Ln(){if(ji)return _t.exports;ji=1,_t.exports=i,_t.exports.default=i;function i(d,p,u){u=u||2;var y=p&&p.length,b=y?p[0]*u:d.length,w=e(d,0,b,u,!0),C=[];if(!w||w.next===w.prev)return C;var T,R,k,D,B,O,W;if(y&&(w=h(d,p,w,u)),d.length>80*u){T=k=d[0],R=D=d[1];for(var L=u;L<b;L+=u)B=d[L],O=d[L+1],B<T&&(T=B),O<R&&(R=O),B>k&&(k=B),O>D&&(D=O);W=Math.max(k-T,D-R),W=W!==0?32767/W:0}return s(w,C,u,T,R,W,0),C}function e(d,p,u,y,b){var w,C;if(b===me(d,p,u,y)>0)for(w=p;w<u;w+=y)C=ve(w,d[w],d[w+1],C);else for(w=u-y;w>=p;w-=y)C=ve(w,d[w],d[w+1],C);return C&&N(C,C.next)&&(Z(C),C=C.next),C}function t(d,p){if(!d)return d;p||(p=d);var u=d,y;do if(y=!1,!u.steiner&&(N(u,u.next)||S(u.prev,u,u.next)===0)){if(Z(u),u=p=u.prev,u===u.next)break;y=!0}else u=u.next;while(y||u!==p);return p}function s(d,p,u,y,b,w,C){if(d){!C&&w&&g(d,y,b,w);for(var T=d,R,k;d.prev!==d.next;){if(R=d.prev,k=d.next,w?n(d,y,b,w):r(d)){p.push(R.i/u|0),p.push(d.i/u|0),p.push(k.i/u|0),Z(d),d=k.next,T=k.next;continue}if(d=k,d===T){C?C===1?(d=o(t(d),p,u),s(d,p,u,y,b,w,2)):C===2&&a(d,p,u,y,b,w):s(t(d),p,u,y,b,w,1);break}}}}function r(d){var p=d.prev,u=d,y=d.next;if(S(p,u,y)>=0)return!1;for(var b=p.x,w=u.x,C=y.x,T=p.y,R=u.y,k=y.y,D=b<w?b<C?b:C:w<C?w:C,B=T<R?T<k?T:k:R<k?R:k,O=b>w?b>C?b:C:w>C?w:C,W=T>R?T>k?T:k:R>k?R:k,L=y.next;L!==p;){if(L.x>=D&&L.x<=O&&L.y>=B&&L.y<=W&&M(b,T,w,R,C,k,L.x,L.y)&&S(L.prev,L,L.next)>=0)return!1;L=L.next}return!0}function n(d,p,u,y){var b=d.prev,w=d,C=d.next;if(S(b,w,C)>=0)return!1;for(var T=b.x,R=w.x,k=C.x,D=b.y,B=w.y,O=C.y,W=T<R?T<k?T:k:R<k?R:k,L=D<B?D<O?D:O:B<O?B:O,ze=T>R?T>k?T:k:R>k?R:k,We=D>B?D>O?D:O:B>O?B:O,di=E(W,L,p,u,y),ui=E(ze,We,p,u,y),I=d.prevZ,F=d.nextZ;I&&I.z>=di&&F&&F.z<=ui;){if(I.x>=W&&I.x<=ze&&I.y>=L&&I.y<=We&&I!==b&&I!==C&&M(T,D,R,B,k,O,I.x,I.y)&&S(I.prev,I,I.next)>=0||(I=I.prevZ,F.x>=W&&F.x<=ze&&F.y>=L&&F.y<=We&&F!==b&&F!==C&&M(T,D,R,B,k,O,F.x,F.y)&&S(F.prev,F,F.next)>=0))return!1;F=F.nextZ}for(;I&&I.z>=di;){if(I.x>=W&&I.x<=ze&&I.y>=L&&I.y<=We&&I!==b&&I!==C&&M(T,D,R,B,k,O,I.x,I.y)&&S(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;F&&F.z<=ui;){if(F.x>=W&&F.x<=ze&&F.y>=L&&F.y<=We&&F!==b&&F!==C&&M(T,D,R,B,k,O,F.x,F.y)&&S(F.prev,F,F.next)>=0)return!1;F=F.nextZ}return!0}function o(d,p,u){var y=d;do{var b=y.prev,w=y.next.next;!N(b,w)&&H(b,y,y.next,w)&&oe(b,w)&&oe(w,b)&&(p.push(b.i/u|0),p.push(y.i/u|0),p.push(w.i/u|0),Z(y),Z(y.next),y=d=w),y=y.next}while(y!==d);return t(y)}function a(d,p,u,y,b,w){var C=d;do{for(var T=C.next.next;T!==C.prev;){if(C.i!==T.i&&P(C,T)){var R=pe(C,T);C=t(C,C.next),R=t(R,R.next),s(C,p,u,y,b,w,0),s(R,p,u,y,b,w,0);return}T=T.next}C=C.next}while(C!==d)}function h(d,p,u,y){var b=[],w,C,T,R,k;for(w=0,C=p.length;w<C;w++)T=p[w]*y,R=w<C-1?p[w+1]*y:d.length,k=e(d,T,R,y,!1),k===k.next&&(k.steiner=!0),b.push(v(k));for(b.sort(l),w=0;w<b.length;w++)u=c(b[w],u);return u}function l(d,p){return d.x-p.x}function c(d,p){var u=f(d,p);if(!u)return p;var y=pe(u,d);return t(y,y.next),t(u,u.next)}function f(d,p){var u=p,y=d.x,b=d.y,w=-1/0,C;do{if(b<=u.y&&b>=u.next.y&&u.next.y!==u.y){var T=u.x+(b-u.y)*(u.next.x-u.x)/(u.next.y-u.y);if(T<=y&&T>w&&(w=T,C=u.x<u.next.x?u:u.next,T===y))return C}u=u.next}while(u!==p);if(!C)return null;var R=C,k=C.x,D=C.y,B=1/0,O;u=C;do y>=u.x&&u.x>=k&&y!==u.x&&M(b<D?y:w,b,k,D,b<D?w:y,b,u.x,u.y)&&(O=Math.abs(b-u.y)/(y-u.x),oe(u,d)&&(O<B||O===B&&(u.x>C.x||u.x===C.x&&m(C,u)))&&(C=u,B=O)),u=u.next;while(u!==R);return C}function m(d,p){return S(d.prev,d,p.prev)<0&&S(p.next,d,d.next)<0}function g(d,p,u,y){var b=d;do b.z===0&&(b.z=E(b.x,b.y,p,u,y)),b.prevZ=b.prev,b.nextZ=b.next,b=b.next;while(b!==d);b.prevZ.nextZ=null,b.prevZ=null,A(b)}function A(d){var p,u,y,b,w,C,T,R,k=1;do{for(u=d,d=null,w=null,C=0;u;){for(C++,y=u,T=0,p=0;p<k&&(T++,y=y.nextZ,!!y);p++);for(R=k;T>0||R>0&&y;)T!==0&&(R===0||!y||u.z<=y.z)?(b=u,u=u.nextZ,T--):(b=y,y=y.nextZ,R--),w?w.nextZ=b:d=b,b.prevZ=w,w=b;u=y}w.nextZ=null,k*=2}while(C>1);return d}function E(d,p,u,y,b){return d=(d-u)*b|0,p=(p-y)*b|0,d=(d|d<<8)&16711935,d=(d|d<<4)&252645135,d=(d|d<<2)&858993459,d=(d|d<<1)&1431655765,p=(p|p<<8)&16711935,p=(p|p<<4)&252645135,p=(p|p<<2)&858993459,p=(p|p<<1)&1431655765,d|p<<1}function v(d){var p=d,u=d;do(p.x<u.x||p.x===u.x&&p.y<u.y)&&(u=p),p=p.next;while(p!==d);return u}function M(d,p,u,y,b,w,C,T){return(b-C)*(p-T)>=(d-C)*(w-T)&&(d-C)*(y-T)>=(u-C)*(p-T)&&(u-C)*(w-T)>=(b-C)*(y-T)}function P(d,p){return d.next.i!==p.i&&d.prev.i!==p.i&&!Me(d,p)&&(oe(d,p)&&oe(p,d)&&fe(d,p)&&(S(d.prev,d,p.prev)||S(d,p.prev,p))||N(d,p)&&S(d.prev,d,d.next)>0&&S(p.prev,p,p.next)>0)}function S(d,p,u){return(p.y-d.y)*(u.x-p.x)-(p.x-d.x)*(u.y-p.y)}function N(d,p){return d.x===p.x&&d.y===p.y}function H(d,p,u,y){var b=ie(S(d,p,u)),w=ie(S(d,p,y)),C=ie(S(u,y,d)),T=ie(S(u,y,p));return!!(b!==w&&C!==T||b===0&&te(d,u,p)||w===0&&te(d,y,p)||C===0&&te(u,d,y)||T===0&&te(u,p,y))}function te(d,p,u){return p.x<=Math.max(d.x,u.x)&&p.x>=Math.min(d.x,u.x)&&p.y<=Math.max(d.y,u.y)&&p.y>=Math.min(d.y,u.y)}function ie(d){return d>0?1:d<0?-1:0}function Me(d,p){var u=d;do{if(u.i!==d.i&&u.next.i!==d.i&&u.i!==p.i&&u.next.i!==p.i&&H(u,u.next,d,p))return!0;u=u.next}while(u!==d);return!1}function oe(d,p){return S(d.prev,d,d.next)<0?S(d,p,d.next)>=0&&S(d,d.prev,p)>=0:S(d,p,d.prev)<0||S(d,d.next,p)<0}function fe(d,p){var u=d,y=!1,b=(d.x+p.x)/2,w=(d.y+p.y)/2;do u.y>w!=u.next.y>w&&u.next.y!==u.y&&b<(u.next.x-u.x)*(w-u.y)/(u.next.y-u.y)+u.x&&(y=!y),u=u.next;while(u!==d);return y}function pe(d,p){var u=new _e(d.i,d.x,d.y),y=new _e(p.i,p.x,p.y),b=d.next,w=p.prev;return d.next=p,p.prev=d,u.next=b,b.prev=u,y.next=u,u.prev=y,w.next=y,y.prev=w,y}function ve(d,p,u,y){var b=new _e(d,p,u);return y?(b.next=y.next,b.prev=y,y.next.prev=b,y.next=b):(b.prev=b,b.next=b),b}function Z(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function _e(d,p,u){this.i=d,this.x=p,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}i.deviation=function(d,p,u,y){var b=p&&p.length,w=b?p[0]*u:d.length,C=Math.abs(me(d,0,w,u));if(b)for(var T=0,R=p.length;T<R;T++){var k=p[T]*u,D=T<R-1?p[T+1]*u:d.length;C-=Math.abs(me(d,k,D,u))}var B=0;for(T=0;T<y.length;T+=3){var O=y[T]*u,W=y[T+1]*u,L=y[T+2]*u;B+=Math.abs((d[O]-d[L])*(d[W+1]-d[O+1])-(d[O]-d[W])*(d[L+1]-d[O+1]))}return C===0&&B===0?0:Math.abs((B-C)/C)};function me(d,p,u,y){for(var b=0,w=p,C=u-y;w<u;w+=y)b+=(d[C]-d[w])*(d[w+1]+d[C+1]),C=w;return b}return i.flatten=function(d){for(var p=d[0][0].length,u={vertices:[],holes:[],dimensions:p},y=0,b=0;b<d.length;b++){for(var w=0;w<d[b].length;w++)for(var C=0;C<p;C++)u.vertices.push(d[b][w][C]);b>0&&(y+=d[b-1].length,u.holes.push(y))}return u},_t.exports}var Gn=Ln();const eo=ni(Gn);var Ls=(i=>(i[i.NONE=0]="NONE",i[i.COLOR=16384]="COLOR",i[i.STENCIL=1024]="STENCIL",i[i.DEPTH=256]="DEPTH",i[i.COLOR_DEPTH=16640]="COLOR_DEPTH",i[i.COLOR_STENCIL=17408]="COLOR_STENCIL",i[i.DEPTH_STENCIL=1280]="DEPTH_STENCIL",i[i.ALL=17664]="ALL",i))(Ls||{});class Nn{constructor(e){this.items=[],this._name=e}emit(e,t,s,r,n,o,a,h){const{name:l,items:c}=this;for(let f=0,m=c.length;f<m;f++)c[f][l](e,t,s,r,n,o,a,h);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const Hn=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],Gs=class Ns extends at{constructor(e){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const t=[...Hn,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(e={}){const t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await Fn(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)e={...this._systemsHash[s].constructor.defaultOptions,...e};e={...Ns.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(e);this._initOptions=e}render(e,t){let s=e;if(s instanceof Te&&(s={container:s},t&&(ee(be,"passing a second argument is deprecated, please use render options instead"),s.target=t.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const r=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=r?s.clearColor:xt.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s)}resize(e,t,s){const r=this.view.resolution;this.view.resize(e,t,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==r&&this.runners.resolutionChange.emit(s)}clear(e={}){const t=this;e.target||(e.target=t.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=Ls.ALL);const{clear:s,clearColor:r,target:n}=e;xt.shared.setValue(r??this.background.colorRgba),t.renderTarget.clear(n,s,xt.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new Nn(t)})}_addSystems(e){let t;for(t in e){const s=e[t];this._addSystem(s.value,s.name)}}_addSystem(e,t){const s=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=s,this._systemsHash[t]=s;for(const r in this.runners)this.runners[r].add(s);return this}_addPipes(e,t){const s=t.reduce((r,n)=>(r[n.name]=n.value,r),{});e.forEach(r=>{const n=r.value,o=r.name,a=s[o];this.renderPipes[o]=new n(this,a?new a:null)})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!Bn())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};Gs.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let Hs=Gs,mt;function Dn(i){return mt!==void 0||(mt=(()=>{var t;const e={stencil:!0,failIfMajorPerformanceCaveat:i??Hs.defaultOptions.failIfMajorPerformanceCaveat};try{if(!$e.get().getWebGLRenderingContext())return!1;let r=$e.get().createCanvas().getContext("webgl",e);const n=!!((t=r==null?void 0:r.getContextAttributes())!=null&&t.stencil);if(r){const o=r.getExtension("WEBGL_lose_context");o&&o.loseContext()}return r=null,n}catch{return!1}})()),mt}let gt;async function Un(i={}){return gt!==void 0||(gt=await(async()=>{const e=$e.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(i)).requestDevice(),!0}catch{return!1}})()),gt}const qi=["webgl","webgpu","canvas"];async function Xn(i){let e=[];i.preference?(e.push(i.preference),qi.forEach(n=>{n!==i.preference&&e.push(n)})):e=qi.slice();let t,s={};for(let n=0;n<e.length;n++){const o=e[n];if(o==="webgpu"&&await Un()){const{WebGPURenderer:a}=await At(async()=>{const{WebGPURenderer:h}=await import("./WebGPURenderer-tg52dgAt.js");return{WebGPURenderer:h}},__vite__mapDeps([4,3,2,5]));t=a,s={...i,...i.webgpu};break}else if(o==="webgl"&&Dn(i.failIfMajorPerformanceCaveat??Hs.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:a}=await At(async()=>{const{WebGLRenderer:h}=await import("./WebGLRenderer-4aGvmSRg.js");return{WebGLRenderer:h}},__vite__mapDeps([6,3,5]));t=a,s={...i,...i.webgl};break}else if(o==="canvas")throw s={...i},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!t)throw new Error("No available renderer for the current environment");const r=new t;return await r.init(s),r}const Ds="8.9.1";class Us{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,Ds)}static destroy(){}}Us.extension=V.Application;class Yn{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,Ds)}destroy(){this._renderer=null}}Yn.extension={type:[V.WebGLSystem,V.WebGPUSystem],name:"initHook",priority:-10};const Xs=class ei{constructor(...e){this.stage=new Te,e[0]!==void 0&&ee(be,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.renderer=await Xn(e),ei._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return ee(be,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){const s=ei._plugins.slice(0);s.reverse(),s.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};Xs._plugins=[];let Ys=Xs;ue.handleByList(V.Application,Ys._plugins);ue.add(Us);ue.add(wr,Ar);const Fe={noiseScale:64e-5,noiseStrength:.2,particleSize:2,mouseAttraction:.3,particleSpeed:1,seedSpeed:12,seedCount:30},Vs=Math.sqrt(3),Vn=.5*(Vs-1),Je=(3-Vs)/6,Zi=i=>Math.floor(i)|0,Ki=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]);function $n(i=Math.random){const e=zn(i),t=new Float64Array(e).map(r=>Ki[r%12*2]),s=new Float64Array(e).map(r=>Ki[r%12*2+1]);return function(n,o){let a=0,h=0,l=0;const c=(n+o)*Vn,f=Zi(n+c),m=Zi(o+c),g=(f+m)*Je,A=f-g,E=m-g,v=n-A,M=o-E;let P,S;v>M?(P=1,S=0):(P=0,S=1);const N=v-P+Je,H=M-S+Je,te=v-1+2*Je,ie=M-1+2*Je,Me=f&255,oe=m&255;let fe=.5-v*v-M*M;if(fe>=0){const Z=Me+e[oe],_e=t[Z],me=s[Z];fe*=fe,a=fe*fe*(_e*v+me*M)}let pe=.5-N*N-H*H;if(pe>=0){const Z=Me+P+e[oe+S],_e=t[Z],me=s[Z];pe*=pe,h=pe*pe*(_e*N+me*H)}let ve=.5-te*te-ie*ie;if(ve>=0){const Z=Me+1+e[oe+1],_e=t[Z],me=s[Z];ve*=ve,l=ve*ve*(_e*te+me*ie)}return 70*(a+h+l)}}function zn(i){const t=new Uint8Array(512);for(let s=0;s<512/2;s++)t[s]=s;for(let s=0;s<512/2-1;s++){const r=s+~~(i()*(256-s)),n=t[s];t[s]=t[r],t[r]=n}for(let s=256;s<512;s++)t[s]=t[s-256];return t}class Wn{constructor(){j(this,"noise2D");this.noise2D=$n()}getAngle(e,t,s){return this.noise2D(e*s,t*s)*Math.PI*2}}const ye=class ye{constructor(){this.addListeners()}addListeners(){window.addEventListener("mousemove",e=>{ye.x=e.clientX,ye.y=e.clientY}),window.addEventListener("mousedown",()=>{ye.down=!0}),window.addEventListener("mouseup",()=>{ye.down=!1})}};j(ye,"x",window.innerWidth/2),j(ye,"y",window.innerHeight/2),j(ye,"down",!1);let Xe=ye;new Xe;function Ji(i,e=10){const t=Math.min(i/e,1),s=Math.floor((1-t)*240);return jn(s,100,50)}function jn(i,e,t){i/=360,e/=100,t/=100;let s,r,n;if(e===0)s=r=n=t;else{const o=(l,c,f)=>(f<0&&(f+=1),f>1&&(f-=1),f<.16666666666666666?l+(c-l)*6*f:f<.5?c:f<.6666666666666666?l+(c-l)*(.6666666666666666-f)*6:l),a=t<.5?t*(1+e):t+e-t*e,h=2*t-a;s=o(h,a,i+1/3),r=o(h,a,i),n=o(h,a,i-1/3)}return qn(s,r,n)}function qn(i,e,t){const s=Math.round(i*255),r=Math.round(e*255),n=Math.round(t*255);return(s<<16)+(r<<8)+n}function Zn(i,e,t){return Math.max(e,Math.min(t,i))}const Ue=class Ue{constructor(e,t){j(this,"sprite");j(this,"vx",0);j(this,"vy",0);j(this,"age",0);this.x=e,this.y=t,Ue.texture||(Ue.texture=this.createParticleTexture()),this.sprite=new Ve(Ue.texture),this.sprite.blendMode="add",this.sprite.x=e,this.sprite.y=t,this.sprite.anchor={x:0,y:1},this.sprite.rotation=0,this.sprite.tint=Ji(this.x+this.y,3e3)}update(e){this.vx=Math.cos(e)*Fe.noiseStrength,this.vy=Math.sin(e)*Fe.noiseStrength,this.sprite.x=this.x+this.vx,this.sprite.y=this.y+this.vy;let t=Math.min(Math.abs(e*.7),1);const s=Math.min(this.age/200,1);if(t=Zn(t*s,-1,1),Xe.down){const n=Xe.x-this.sprite.x,o=Xe.y-this.sprite.y,a=Math.sqrt(n*n+o*o)||1;Fe.mouseAttraction/a,t=a/1e3}else this.sprite.rotation=e;this.sprite.scale.set(t),this.age-=e;const r=Math.pow(e,1);this.sprite.tint=Ji(r,6)}createParticleTexture(){const r=document.createElement("canvas");r.width=80,r.height=6;const n=r.getContext("2d"),o=n.createLinearGradient(0,0,80,0);return o.addColorStop(0,"rgba(255, 255, 255, 0)"),o.addColorStop(.2,"rgba(255, 255, 255, 0.3)"),o.addColorStop(1,"rgba(255, 255, 255, 1)"),n.fillStyle=o,n.beginPath(),n.roundRect(0,0,80,6,30),n.fill(),Y.from(r)}};j(Ue,"texture");let ti=Ue;class Kn{constructor(e){j(this,"app");j(this,"particleContainer");j(this,"noise",new Wn);j(this,"particles",[]);j(this,"emitterAngle",0);this.stats=e,this.app=new Ys;const t={dynamicProperties:{position:!0,scale:!0,rotation:!0,color:!0}};this.particleContainer=new Te(t),this.init()}async init(){await this.app.init({resizeTo:window,antialias:!0}),this.app.stage.addChild(this.particleContainer),this.app.ticker.add(this.update.bind(this)),document.body.appendChild(this.app.canvas),this.initGrid()}initGrid(){const e=1e4-this.particles.length,t=Math.ceil(Math.sqrt(e)),s=Math.ceil(e/t),r=Fe.particleSize*14,n=(this.app.screen.width-t*r)/2,o=(this.app.screen.height-s*r)/2;for(let a=0;a<e;a++){const h=n+a%t*r,l=o+Math.floor(a/t)*r,c=new ti(h,l);this.addParticle(c)}}addParticle(e){this.particles.push(e),this.particleContainer.addChild(e.sprite)}removeParticle(e){this.particleContainer.removeChild(e.sprite),this.particles.splice(this.particles.indexOf(e),1)}update(){this.stats.begin();for(const e of this.particles){const t=this.noise.getAngle(e.sprite.x+this.emitterAngle,e.sprite.y+this.emitterAngle,Fe.noiseScale);e.update(t)}this.emitterAngle+=1,this.stats.end()}}const li=new xr;li.showPanel(0);document.body.appendChild(li.dom);const $s=new _r;$s.add(Fe,"noiseScale",1e-5,.01,1e-5);$s.add(Fe,"noiseStrength",.1,5,.1);new Kn(li);export{Hs as A,Ct as B,Te as C,$e as D,V as E,Hi as F,ni as G,rn as H,Ts as I,eo as J,cn as K,Qn as L,X as M,He as N,xn as O,le as P,Fr as Q,de as R,Ve as S,Y as T,Kt as U,Ds as V,Lr as W,pt as a,at as b,Ls as c,Ss as d,ue as e,ce as f,Br as g,_s as h,Ce as i,_n as j,we as k,Nn as l,Ui as m,Ti as n,Gt as o,Yi as p,yn as q,qr as r,xt as s,gs as t,Bn as u,ee as v,Ie as w,be as x,Yn as y,Or as z};
